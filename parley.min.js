!function e(t,s,i){function n(o,a){if(!s[o]){if(!t[o]){var h="function"==typeof require&&require;if(!a&&h)return h(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var l=s[o]={exports:{}};t[o][0].call(l.exports,function(e){var s=t[o][1][e];return n(s?s:e)},l,l.exports,e,t,s,i)}return s[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(){},{}],2:[function(e,t,s){"use strict";var i=e("./handlebars.runtime")["default"],n=e("./handlebars/compiler/ast")["default"],r=e("./handlebars/compiler/base").parser,o=e("./handlebars/compiler/base").parse,a=e("./handlebars/compiler/compiler").Compiler,h=e("./handlebars/compiler/compiler").compile,l=e("./handlebars/compiler/compiler").precompile,c=e("./handlebars/compiler/javascript-compiler")["default"],p=i.create,u=function(){var e=p();return e.compile=function(t,s){return h(t,s,e)},e.precompile=function(t,s){return l(t,s,e)},e.AST=n,e.Compiler=a,e.JavaScriptCompiler=c,e.Parser=r,e.parse=o,e};i=u(),i.create=u,s["default"]=i},{"./handlebars.runtime":3,"./handlebars/compiler/ast":5,"./handlebars/compiler/base":6,"./handlebars/compiler/compiler":7,"./handlebars/compiler/javascript-compiler":8}],3:[function(e,t,s){"use strict";var i=e("./handlebars/base"),n=e("./handlebars/safe-string")["default"],r=e("./handlebars/exception")["default"],o=e("./handlebars/utils"),a=e("./handlebars/runtime"),h=function(){var e=new i.HandlebarsEnvironment;return o.extend(e,i),e.SafeString=n,e.Exception=r,e.Utils=o,e.VM=a,e.template=function(t){return a.template(t,e)},e},l=h();l.create=h,s["default"]=l},{"./handlebars/base":4,"./handlebars/exception":12,"./handlebars/runtime":13,"./handlebars/safe-string":14,"./handlebars/utils":15}],4:[function(e,t,s){"use strict";function i(e,t){this.helpers=e||{},this.partials=t||{},n(this)}function n(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,s){var i=s.inverse||function(){},n=s.fn;return u(t)&&(t=t.call(this)),t===!0?n(this):t===!1||null==t?i(this):p(t)?t.length>0?e.helpers.each(t,s):i(this):n(t)}),e.registerHelper("each",function(e,t){var s,i=t.fn,n=t.inverse,r=0,o="";if(u(e)&&(e=e.call(this)),t.data&&(s=g(t.data)),e&&"object"==typeof e)if(p(e))for(var a=e.length;a>r;r++)s&&(s.index=r,s.first=0===r,s.last=r===e.length-1),o+=i(e[r],{data:s});else for(var h in e)e.hasOwnProperty(h)&&(s&&(s.key=h,s.index=r,s.first=0===r),o+=i(e[h],{data:s}),r++);return 0===r&&(o=n(this)),o}),e.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,s){return e.helpers["if"].call(this,t,{fn:s.inverse,inverse:s.fn,hash:s.hash})}),e.registerHelper("with",function(e,t){return u(e)&&(e=e.call(this)),o.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,s){var i=s.data&&null!=s.data.level?parseInt(s.data.level,10):1;e.log(i,t)})}function r(e,t){m.log(e,t)}var o=e("./utils"),a=e("./exception")["default"],h="1.3.0";s.VERSION=h;var l=4;s.COMPILER_REVISION=l;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};s.REVISION_CHANGES=c;var p=o.isArray,u=o.isFunction,f=o.toString,d="[object Object]";s.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:r,registerHelper:function(e,t,s){if(f.call(e)===d){if(s||t)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else s&&(t.not=s),this.helpers[e]=t},registerPartial:function(e,t){f.call(e)===d?o.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(m.level<=e){var s=m.methodMap[e];"undefined"!=typeof console&&console[s]&&console[s].call(console,t)}}};s.logger=m,s.log=r;var g=function(e){var t={};return o.extend(t,e),t};s.createFrame=g},{"./exception":12,"./utils":15}],5:[function(e,t,s){"use strict";function i(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var n=e("../exception")["default"],r={ProgramNode:function(e,t,s,n){var o,a;3===arguments.length?(n=s,s=null):2===arguments.length&&(n=t,t=null),i.call(this,n),this.type="program",this.statements=e,this.strip={},s?(a=s[0],a?(o={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new r.ProgramNode(s,t,o)):this.inverse=new r.ProgramNode(s,t),this.strip.right=t.left):t&&(this.strip.left=t.right)},MustacheNode:function(e,t,s,n,o){if(i.call(this,o),this.type="mustache",this.strip=n,null!=s&&s.charAt){var a=s.charAt(3)||s.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!s;this.sexpr=e instanceof r.SexprNode?e:new r.SexprNode(e,t),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,s){i.call(this,s),this.type="sexpr",this.hash=t;var n=this.id=e[0],r=this.params=e.slice(1),o=this.eligibleHelper=n.isSimple;this.isHelper=o&&(r.length||t)},PartialNode:function(e,t,s,n){i.call(this,n),this.type="partial",this.partialName=e,this.context=t,this.strip=s},BlockNode:function(e,t,s,r,o){if(i.call(this,o),e.sexpr.id.original!==r.path.original)throw new n(e.sexpr.id.original+" doesn't match "+r.path.original,this);this.type="block",this.mustache=e,this.program=t,this.inverse=s,this.strip={left:e.strip.left,right:r.strip.right},(t||s).strip.left=e.strip.right,(s||t).strip.right=r.strip.left,s&&!t&&(this.isInverse=!0)},ContentNode:function(e,t){i.call(this,t),this.type="content",this.string=e},HashNode:function(e,t){i.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,t){i.call(this,t),this.type="ID";for(var s="",r=[],o=0,a=0,h=e.length;h>a;a++){var l=e[a].part;if(s+=(e[a].separator||"")+l,".."===l||"."===l||"this"===l){if(r.length>0)throw new n("Invalid path: "+s,this);".."===l?o++:this.isScoped=!0}else r.push(l)}this.original=s,this.parts=r,this.string=r.join("."),this.depth=o,this.isSimple=1===e.length&&!this.isScoped&&0===o,this.stringModeValue=this.string},PartialNameNode:function(e,t){i.call(this,t),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,t){i.call(this,t),this.type="DATA",this.id=e},StringNode:function(e,t){i.call(this,t),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){i.call(this,t),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,t){i.call(this,t),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,t){i.call(this,t),this.type="comment",this.comment=e}};s["default"]=r},{"../exception":12}],6:[function(e,t,s){"use strict";function i(e){return e.constructor===r.ProgramNode?e:(n.yy=r,n.parse(e))}var n=e("./parser")["default"],r=e("./ast")["default"];s.parser=n,s.parse=i},{"./ast":5,"./parser":9}],7:[function(e,t,s){"use strict";function i(){}function n(e,t,s){if(null==e||"string"!=typeof e&&e.constructor!==s.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=s.parse(e),n=(new s.Compiler).compile(i,t);return(new s.JavaScriptCompiler).compile(n,t)}function r(e,t,s){function i(){var i=s.parse(e),n=(new s.Compiler).compile(i,t),r=(new s.JavaScriptCompiler).compile(n,t,void 0,!0);return s.template(r)}if(null==e||"string"!=typeof e&&e.constructor!==s.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var n;return function(e,t){return n||(n=i()),n.call(this,e,t)}}var o=e("../exception")["default"];s.Compiler=i,i.prototype={compiler:i,disassemble:function(){for(var e,t,s,i=this.opcodes,n=[],r=0,o=i.length;o>r;r++)if(e=i[r],"DECLARE"===e.opcode)n.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var a=0;a<e.args.length;a++)s=e.args[a],"string"==typeof s&&(s='"'+s.replace("\n","\\n")+'"'),t.push(s);n.push(e.opcode+" "+t.join(" "))}return n.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var s=0;t>s;s++){var i=this.opcodes[s],n=e.opcodes[s];if(i.opcode!==n.opcode||i.args.length!==n.args.length)return!1;for(var r=0;r<i.args.length;r++)if(i.args[r]!==n.args[r])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(s=0;t>s;s++)if(!this.children[s].equals(e.children[s]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var s=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},s)for(var i in s)this.options.knownHelpers[i]=s[i];return this.accept(e)},accept:function(e){var t,s=e.strip||{};return s.left&&this.opcode("strip"),t=this[e.type](e),s.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,s=0,i=t.length;i>s;s++)this.accept(t[s]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,s=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||s.usePartial,this.children[i]=s;for(var n=0,r=s.depths.list.length;r>n;n++)t=s.depths.list[n],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,s=e.program,i=e.inverse;s&&(s=this.compileProgram(s)),i&&(i=this.compileProgram(i));var n=t.sexpr,r=this.classifySexpr(n);"helper"===r?this.helperSexpr(n,s,i):"simple"===r?(this.simpleSexpr(n),this.opcode("pushProgram",s),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(n,s,i),this.opcode("pushProgram",s),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,s,i=e.pairs;this.opcode("pushHash");for(var n=0,r=i.length;r>n;n++)t=i[n],s=t[1],this.options.stringParams?(s.depth&&this.addDepth(s.depth),this.opcode("getContext",s.depth||0),this.opcode("pushStringParam",s.stringModeValue,s.type),"sexpr"===s.type&&this.sexpr(s)):this.accept(s),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(e,t,s){var i=e.id,n=i.parts[0],r=null!=t||null!=s;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",s),this.opcode("invokeAmbiguous",n,r)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,s){var i=this.setupFullMustacheParams(e,t,s),n=e.id.parts[0];if(this.options.knownHelpers[n])this.opcode("invokeKnownHelper",i.length,n);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+n,e);this.opcode("invokeHelper",i.length,n,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var s=1,i=e.parts.length;i>s;s++)this.opcode("lookup",e.parts[s])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new o("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,s=0,i=t.length;i>s;s++)this.opcode("lookup",t[s])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,s=e.eligibleHelper,i=this.options;if(s&&!t){var n=e.id.parts[0];i.knownHelpers[n]?t=!0:i.knownHelpersOnly&&(s=!1)}return t?"helper":s?"ambiguous":"simple"},pushParams:function(e){for(var t,s=e.length;s--;)t=e[s],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,s){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",s),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},s.precompile=n,s.compile=r},{"../exception":12}],8:[function(e,t,s){"use strict";function i(e){this.value=e}function n(){}var r=e("../base").COMPILER_REVISION,o=e("../base").REVISION_CHANGES,a=e("../base").log,h=e("../exception")["default"];n.prototype={nameLookup:function(e,t){var s,i;return 0===e.indexOf("depth")&&(s=!0),i=/^[0-9]+$/.test(t)?e+"["+t+"]":n.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",s?"("+e+" && "+i+")":i},compilerInfo:function(){var e=r,t=o[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,s,i){this.environment=e,this.options=t||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!s,this.context=s||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var n,r=e.opcodes;this.i=0;for(var o=r.length;this.i<o;this.i++)n=r[this.i],"DECLARE"===n.opcode?this[n.name]=n.value:this[n.opcode].apply(this,n.args),n.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,s="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(s=s+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(s+=" data = data || {};"),e.push(s)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var s in this.context.aliases)this.context.aliases.hasOwnProperty(s)&&(this.source[1]=this.source[1]+", "+s+"="+this.context.aliases[s]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],n=0,r=this.environment.depths.list.length;r>n;n++)i.push("depth"+this.environment.depths.list[n]);var o=this.mergeSource();if(this.isChild||(o=this.compilerInfo()+o),e)return i.push(o),Function.apply(this,i);var h="function "+(this.name||"")+"("+i.join(",")+") {\n  "+o+"}";return a("debug",h+"\n\n"),h},mergeSource:function(){for(var e,t="",s=0,i=this.source.length;i>s;s++){var n=this.source[s];n.appendToBuffer?e=e?e+"\n    + "+n.content:n.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=n+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,s){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(e,t,!0),n=this.nameLookup("depth"+this.lastContext,t,"context"),r="helper = "+i.name+" || "+n;i.paramsInit&&(r+=","+i.paramsInit),this.push("("+r+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),s||this.flushInline()},invokeKnownHelper:function(e,t){var s=this.setupHelper(e,t);this.push(s.name+".call("+s.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var s=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),n=this.nameLookup("depth"+this.lastContext,e,"context"),r=this.nextStack();s.paramsInit&&this.pushSource(s.paramsInit),this.pushSource("if (helper = "+i+") { "+r+" = helper.call("+s.callParams+"); }"),this.pushSource("else { helper = "+n+"; "+r+" = typeof helper === functionType ? helper.call("+s.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,s,i=this.popStack();this.options.stringParams&&(s=this.popStack(),t=this.popStack());var n=this.hash;t&&n.contexts.push("'"+e+"': "+t),s&&n.types.push("'"+e+"': "+s),n.values.push("'"+e+"': ("+i+")")},compiler:n,compileChildren:function(e,t){for(var s,i,n=e.children,r=0,o=n.length;o>r;r++){s=n[r],i=new this.compiler;var a=this.matchExistingProgram(s);null==a?(this.context.programs.push(""),a=this.context.programs.length,s.index=a,s.name="program"+a,this.context.programs[a]=i.compile(s,t,this.context),this.context.environments[a]=s):(s.index=a,s.name="program"+a)}},matchExistingProgram:function(e){for(var t=0,s=this.context.environments.length;s>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,s=this.environment.children[e],i=s.depths.list,n=[s.index,s.name,"data"],r=0,o=i.length;o>r;r++)t=i[r],n.push(1===t?"depth0":"depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+n.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new i(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,s,n,r="",o=this.isInline();if(o){var a=this.popStack(!0);if(a instanceof i)t=a.value,n=!0;else{s=!this.stackSlot;var h=s?this.incrStack():this.topStackName();r="("+this.push(h)+" = "+a+"),",t=this.topStack()}}else t=this.topStack();var l=e.call(this,t);return o?(n||this.popStack(),s&&this.stackSlot--,this.push("("+r+l+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+r+l+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,s=e.length;s>t;t++){var n=e[t];n instanceof i?this.compileStack.push(n):this.pushStack(n)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),s=(t?this.inlineStack:this.compileStack).pop();if(!e&&s instanceof i)return s.value;if(!t){if(!this.stackSlot)throw new h("Invalid stack pop");this.stackSlot--}return s},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,s=t[t.length-1];return!e&&s instanceof i?s.value:s},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,s){var i=[],n=this.setupParams(e,i,s),r=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:n,name:r,callParams:["depth0"].concat(i).join(", "),helperMissingParams:s&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupOptions:function(e,t){var s,i,n,r=[],o=[],a=[];r.push("hash:"+this.popStack()),this.options.stringParams&&(r.push("hashTypes:"+this.popStack()),r.push("hashContexts:"+this.popStack())),i=this.popStack(),n=this.popStack(),(n||i)&&(n||(this.context.aliases.self="this",n="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),r.push("inverse:"+i),r.push("fn:"+n));for(var h=0;e>h;h++)s=this.popStack(),t.push(s),this.options.stringParams&&(a.push(this.popStack()),o.push(this.popStack()));return this.options.stringParams&&(r.push("contexts:["+o.join(",")+"]"),r.push("types:["+a.join(",")+"]")),this.options.data&&r.push("data:data"),r},setupParams:function(e,t,s){var i="{"+this.setupOptions(e,t).join(",")+"}";return s?(this.useRegister("options"),t.push("options"),"options="+i):(t.push(i),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=n.RESERVED_WORDS={},p=0,u=l.length;u>p;p++)c[l[p]]=!0;n.isValidJavaScriptVariableName=function(e){return!n.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},s["default"]=n},{"../base":4,"../exception":12}],9:[function(e,t,s){"use strict";var i=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var s={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,s,i,n,r,o){var a=o.length-1;switch(r){case 1:return new n.ProgramNode(o[a-1],this._$);case 2:return new n.ProgramNode([],this._$);case 3:this.$=new n.ProgramNode([],o[a-1],o[a],this._$);break;case 4:this.$=new n.ProgramNode(o[a-2],o[a-1],o[a],this._$);break;case 5:this.$=new n.ProgramNode(o[a-1],o[a],[],this._$);break;case 6:this.$=new n.ProgramNode(o[a],this._$);break;case 7:this.$=new n.ProgramNode([],this._$);break;case 8:this.$=new n.ProgramNode([],this._$);break;case 9:this.$=[o[a]];break;case 10:o[a-1].push(o[a]),this.$=o[a-1];break;case 11:this.$=new n.BlockNode(o[a-2],o[a-1].inverse,o[a-1],o[a],this._$);break;case 12:this.$=new n.BlockNode(o[a-2],o[a-1],o[a-1].inverse,o[a],this._$);break;case 13:this.$=o[a];break;case 14:this.$=o[a];break;case 15:this.$=new n.ContentNode(o[a],this._$);break;case 16:this.$=new n.CommentNode(o[a],this._$);break;case 17:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 18:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 19:this.$={path:o[a-1],strip:e(o[a-2],o[a])};break;case 20:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 21:this.$=new n.MustacheNode(o[a-1],null,o[a-2],e(o[a-2],o[a]),this._$);break;case 22:this.$=new n.PartialNode(o[a-2],o[a-1],e(o[a-3],o[a]),this._$);break;case 23:this.$=e(o[a-1],o[a]);break;case 24:this.$=new n.SexprNode([o[a-2]].concat(o[a-1]),o[a],this._$);break;case 25:this.$=new n.SexprNode([o[a]],null,this._$);break;case 26:this.$=o[a];break;case 27:this.$=new n.StringNode(o[a],this._$);break;case 28:this.$=new n.IntegerNode(o[a],this._$);break;case 29:this.$=new n.BooleanNode(o[a],this._$);break;case 30:this.$=o[a];break;case 31:o[a-1].isHelper=!0,this.$=o[a-1];break;case 32:this.$=new n.HashNode(o[a],this._$);break;case 33:this.$=[o[a-2],o[a]];break;case 34:this.$=new n.PartialNameNode(o[a],this._$);break;case 35:this.$=new n.PartialNameNode(new n.StringNode(o[a],this._$),this._$);break;case 36:this.$=new n.PartialNameNode(new n.IntegerNode(o[a],this._$));break;case 37:this.$=new n.DataNode(o[a],this._$);break;case 38:this.$=new n.IdNode(o[a],this._$);break;case 39:o[a-2].push({part:o[a],separator:o[a-1]}),this.$=o[a-2];break;case 40:this.$=[{part:o[a]}];break;case 43:this.$=[];break;case 44:o[a-1].push(o[a]);break;case 47:this.$=[o[a]];break;case 48:o[a-1].push(o[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)
},parse:function(e){function t(){var e;return e=s.lexer.lex()||1,"number"!=typeof e&&(e=s.symbols_[e]||e),e}var s=this,i=[0],n=[null],r=[],o=this.table,a="",h=0,l=0,c=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var p=this.lexer.yylloc;r.push(p);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,m,g,v,_,y,b,k,x={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===f||"undefined"==typeof f)&&(f=t()),g=o[m]&&o[m][f]),"undefined"==typeof g||!g.length||!g[0]){var S="";if(!c){k=[];for(_ in o[m])this.terminals_[_]&&_>2&&k.push("'"+this.terminals_[_]+"'");S=this.lexer.showPosition?"Parse error on line "+(h+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(h+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(S,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:p,expected:k})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+f);switch(g[0]){case 1:i.push(f),n.push(this.lexer.yytext),r.push(this.lexer.yylloc),i.push(g[1]),f=null,d?(f=d,d=null):(l=this.lexer.yyleng,a=this.lexer.yytext,h=this.lexer.yylineno,p=this.lexer.yylloc,c>0&&c--);break;case 2:if(y=this.productions_[g[1]][1],x.$=n[n.length-y],x._$={first_line:r[r.length-(y||1)].first_line,last_line:r[r.length-1].last_line,first_column:r[r.length-(y||1)].first_column,last_column:r[r.length-1].last_column},u&&(x._$.range=[r[r.length-(y||1)].range[0],r[r.length-1].range[1]]),v=this.performAction.call(x,a,l,h,this.yy,g[1],n,r),"undefined"!=typeof v)return v;y&&(i=i.slice(0,-1*y*2),n=n.slice(0,-1*y),r=r.slice(0,-1*y)),i.push(this.productions_[g[1]][0]),n.push(x.$),r.push(x._$),b=o[i[i.length-2]][i[i.length-1]],i.push(b);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,s=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),s.length-1&&(this.yylineno-=s.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:s?(s.length===i.length?this.yylloc.first_column:0)+i[i.length-s.length].length-s[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,s,i,n;this._more||(this.yytext="",this.match="");for(var r=this._currentRules(),o=0;o<r.length&&(s=this._input.match(this.rules[r[o]]),!s||t&&!(s[0].length>t[0].length)||(t=s,i=o,this.options.flex));o++);return t?(n=t[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,r[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,s,i){function n(e,s){return t.yytext=t.yytext.substr(e,t.yyleng-s)}switch(s){case 0:if("\\\\"===t.yytext.slice(-2)?(n(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(n(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return n(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return n(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=n(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=n(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=n(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return s.lexer=i,t.prototype=s,s.Parser=t,new t}();s["default"]=i},{}],10:[function(e,t,s){"use strict";function i(e){return(new n).accept(e)}function n(){this.padding=0}var r=e("./visitor")["default"];s.print=i,s.PrintVisitor=n,n.prototype=new r,n.prototype.pad=function(e,t){for(var s="",i=0,n=this.padding;n>i;i++)s+="  ";return s+=e,t!==!1&&(s+="\n"),s},n.prototype.program=function(e){var t,s,i="",n=e.statements;for(t=0,s=n.length;s>t;t++)i+=this.accept(n[t]);return this.padding--,i},n.prototype.block=function(e){var t="";return t+=this.pad("BLOCK:"),this.padding++,t+=this.accept(e.mustache),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},n.prototype.sexpr=function(e){for(var t,s=e.params,i=[],n=0,r=s.length;r>n;n++)i.push(this.accept(s[n]));return s="["+i.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.id)+" "+s+t},n.prototype.mustache=function(e){return this.pad("{{ "+this.accept(e.sexpr)+" }}")},n.prototype.partial=function(e){var t=this.accept(e.partialName);return e.context&&(t=t+" "+this.accept(e.context)),this.pad("{{> "+t+" }}")},n.prototype.hash=function(e){for(var t,s,i=e.pairs,n=[],r=0,o=i.length;o>r;r++)t=i[r][0],s=this.accept(i[r][1]),n.push(t+"="+s);return"HASH{"+n.join(", ")+"}"},n.prototype.STRING=function(e){return'"'+e.string+'"'},n.prototype.INTEGER=function(e){return"INTEGER{"+e.integer+"}"},n.prototype.BOOLEAN=function(e){return"BOOLEAN{"+e.bool+"}"},n.prototype.ID=function(e){var t=e.parts.join("/");return e.parts.length>1?"PATH:"+t:"ID:"+t},n.prototype.PARTIAL_NAME=function(e){return"PARTIAL:"+e.name},n.prototype.DATA=function(e){return"@"+this.accept(e.id)},n.prototype.content=function(e){return this.pad("CONTENT[ '"+e.string+"' ]")},n.prototype.comment=function(e){return this.pad("{{! '"+e.comment+"' }}")}},{"./visitor":11}],11:[function(e,t,s){"use strict";function i(){}i.prototype={constructor:i,accept:function(e){return this[e.type](e)}},s["default"]=i},{}],12:[function(e,t,s){"use strict";function i(e,t){var s;t&&t.firstLine&&(s=t.firstLine,e+=" - "+s+":"+t.firstColumn);for(var i=Error.prototype.constructor.call(this,e),r=0;r<n.length;r++)this[n[r]]=i[n[r]];s&&(this.lineNumber=s,this.column=t.firstColumn)}var n=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,s["default"]=i},{}],13:[function(e,t,s){"use strict";function i(e){var t=e&&e[0]||1,s=p;if(t!==s){if(s>t){var i=u[s],n=u[t];throw new c("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+n+").")}throw new c("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function n(e,t){if(!t)throw new c("No environment passed to template");var s=function(e,s,i,n,r,o){var a=t.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(t.compile){var h={helpers:n,partials:r,data:o};return r[s]=t.compile(e,{data:void 0!==o},t),r[s](i,h)}throw new c("The partial "+s+" could not be compiled when running in runtime-only mode")},i={escapeExpression:l.escapeExpression,invokePartial:s,programs:[],program:function(e,t,s){var i=this.programs[e];return s?i=o(e,t,s):i||(i=this.programs[e]=o(e,t)),i},merge:function(e,t){var s=e||t;return e&&t&&e!==t&&(s={},l.extend(s,t),l.extend(s,e)),s},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(s,n){n=n||{};var r,o,a=n.partial?n:t;n.partial||(r=n.helpers,o=n.partials);var h=e.call(i,a,s,r,o,n.data);return n.partial||t.VM.checkRevision(i.compilerInfo),h}}function r(e,t,s){var i=Array.prototype.slice.call(arguments,3),n=function(e,n){return n=n||{},t.apply(this,[e,n.data||s].concat(i))};return n.program=e,n.depth=i.length,n}function o(e,t,s){var i=function(e,i){return i=i||{},t(e,i.data||s)};return i.program=e,i.depth=0,i}function a(e,t,s,i,n,r){var o={partial:!0,helpers:i,partials:n,data:r};if(void 0===e)throw new c("The partial "+t+" could not be found");return e instanceof Function?e(s,o):void 0}function h(){return""}var l=e("./utils"),c=e("./exception")["default"],p=e("./base").COMPILER_REVISION,u=e("./base").REVISION_CHANGES;s.checkRevision=i,s.template=n,s.programWithDepth=r,s.program=o,s.invokePartial=a,s.noop=h},{"./base":4,"./exception":12,"./utils":15}],14:[function(e,t,s){"use strict";function i(e){this.string=e}i.prototype.toString=function(){return""+this.string},s["default"]=i},{}],15:[function(e,t,s){"use strict";function i(e){return h[e]||"&amp;"}function n(e,t){for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}function r(e){return e instanceof a?e.toString():e||0===e?(e=""+e,c.test(e)?e.replace(l,i):e):""}function o(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}var a=e("./safe-string")["default"],h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,c=/[&<>"'`]/;s.extend=n;var p=Object.prototype.toString;s.toString=p;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===p.call(e)});var u;s.isFunction=u;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===p.call(e):!1};s.isArray=f,s.escapeExpression=r,s.isEmpty=o},{"./safe-string":14}],16:[function(e,t){var s=e("../dist/cjs/handlebars")["default"];s.Visitor=e("../dist/cjs/handlebars/compiler/visitor")["default"];var i=e("../dist/cjs/handlebars/compiler/printer");if(s.PrintVisitor=i.PrintVisitor,s.print=i.print,t.exports=s,"undefined"!=typeof e&&e.extensions){var n=function(t,i){var n=e("fs"),r=n.readFileSync(i,"utf8");t.exports=s.compile(r)};e.extensions[".handlebars"]=n,e.extensions[".hbs"]=n}},{"../dist/cjs/handlebars":2,"../dist/cjs/handlebars/compiler/printer":10,"../dist/cjs/handlebars/compiler/visitor":11,fs:1}],17:[function(e,t){t.exports=e("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":3}],18:[function(e,t){t.exports=e("handlebars/runtime")["default"]},{"handlebars/runtime":17}],19:[function(e,t){var s,i,n,r,o,a,h,l;h={},t.exports=h,s=function(){function e(){this.current_users=[],this.open_conversations=[],this.conversations=[],function(){var e,t;return t=document.createElement("script"),t.type="text/javascript",t.async=!0,t.src="/socket.io/socket.io.js",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)}(),function(){var e,t;return e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client:plusone.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}(),this.server.on("persistent_convo",this.load_persistent_convo.bind(this)),this.server.on("current_users",this.load_current_users.bind(this)),this.server.on("user_logged_on",this.user_logged_on.bind(this)),this.server.on("user_logged_off",this.user_logged_off.bind(this))}return e.prototype.server=io.connect("wss://"+window.location.hostname),e.prototype.load_persistent_convo=function(e,t){var s,r,o,a,h,l,c,p,u,f,d;for(r=p=0,f=e.length;f>p;r=++p)o=e[r],o.image_url===this.me.image_url&&e.splice(r,1);for(c=[],u=0,d=t.length;d>u;u++)a=t[u],l=JSON.parse(a),h=new n(l.recipients,l.sender,l.content,l.time_stamp),c.push(h);return s=new i(e,c),this.conversations.push(s)},e.prototype.load_current_users=function(e){var t,s,i,n,r,o;for(this.current_users=e,r=this.current_users,o=[],t=i=0,n=r.length;n>i;t=++i)s=r[t],o.push(s.image_url===this.me.image_url?this.current_users.splice(t,1):void 0);return o},e.prototype.user_logged_on=function(e,t){var s;return s=new r(e,t),this.current_users.push(s)},e.prototype.user_logged_off=function(e,t){var s,i,n,r,o;for(console.log(this.current_users),o=this.current_users,s=n=0,r=o.length;r>n;s=++n)i=o[s],t===i.image_url&&this.current_users.splice(s,1);return console.log(this.current_users)},e}(),l=new s,t.exports=l,a=e("./oauth.coffee"),o=e("./command_center_view.coffee"),i=e("./conversation_model.coffee"),r=e("./user_model.coffee"),n=e("./message_model.coffee"),s.prototype.command_center=o,s.prototype.oauth=a},{"./command_center_view.coffee":21,"./conversation_model.coffee":22,"./message_model.coffee":23,"./oauth.coffee":25,"./user_model.coffee":34}],20:[function(e,t){var s,n,r,o,a,h,l;h=e("./app.coffee"),o=e("./message_model.coffee"),a=e("./message_view.coffee"),n=e("./conversation_model.coffee"),l=e("./templates/chat_room.hbs"),r=e("hbsfy/runtime"),r.registerHelper("title_bar_function",function(){return this.convo_partners.length<2?this.convo_partners[0].display_name:this.first_name_list}),s=function(){function e(e){this.convo=e,this.render(),$("body").append(this.$element),this.loadPersistentMessages(),console.log(h.open_conversations),h.server.on("message",this.message_callback.bind(this)),h.server.on("user_offline",this.user_offline_callback.bind(this)),h.server.on("typing_notification",this.typing_notification_callback.bind(this)),this.$element.find(".chat-close").on("click",this.closeWindow.bind(this)),this.$element.find(".send").on("keypress",this.sendOnEnter.bind(this)),this.$element.find(".send").on("keyup",this.emitTypingNotification.bind(this)),this.$element.find(".top-bar, minify ").on("click",this.toggleChat.bind(this)),this.$element.on("click",this.removeNotifications.bind(this)),this.$discussion.find(".parley_file_upload").on("change",this.file_upload.bind(this)),h.title_notification={notified:!1,page_title:$("html title").html()}}return e.prototype.message_callback=function(e){return this.convo.message_filter===e.convo_key?(this.convo.add_message(e),this.renderDiscussion(),this.$element.find(".top-bar").addClass("new-message"),this.titleAlert()):void 0},e.prototype.user_offline_callback=function(){var e;return e=new o(h.me,{image_url:"http://storage.googleapis.com/parley-assets/server_network.png"},"This user is no longer online",new Date),this.convo.add_message(e),this.renderDiscussion()},e.prototype.typing_notification_callback=function(e,t,s){var i;if(e===this.convo.message_filter){if(!s)return this.$discussion.find(".incoming").remove(),this.scrollToLastMessage();if(0===this.$discussion.find(".incoming").length)return i="<li class='incoming'><div class='avatar'><img src='"+t.image_url+"'/></div><div class='messages'><p>"+t.display_name+" is typing...</p></div></li>",that.$(".discussion").append(typingNotification),this.$discussion.append(i),this.scrollToLastMessage()}},e.prototype.add_member=function(e){var t,s,r,o,a,l;for(r=this.convo.convo_partners.concat(e),s=new n(r),h.conversations.push(s),l=h.open_conversations,o=0,a=l.length;a>o;o++)t=l[o],t===this.convo.message_filter&&h.open_conversations.splice(i,1);return h.open_conversations.push(s.message_filter),this.convo=s,this.render()},e.prototype.render=function(){return this.$element=$(l(this.convo)),this.$discussion=this.$element.find(".discussion")},e.prototype.renderDiscussion=function(){var e;return e=this.convo.messages.slice(-1)[0],console.log(e),this.appendMessage(e),this.scrollToLastMessage()},e.prototype.appendMessage=function(e){var t;return t=new a(e),console.log(t),t.render(),this.$discussion.append(t.$element)},e.prototype.scrollToLastMessage=function(){return this.$discussion.scrollTop(this.$discussion.find("li:last-child").offset().top+this.$discussion.scrollTop())},e.prototype.loadPersistentMessages=function(){var e,t,s,i;for(i=this.convo.messages,t=0,s=i.length;s>t;t++)e=i[t],this.appendMessage(e);return this.convo.messages.length>0?this.scrollToLastMessage():void 0},e.prototype.sendOnEnter=function(e){return 13===e.keyCode?(this.sendMessage(),this.removeNotifications()):void 0},e.prototype.sendMessage=function(){var e;return e=new o(this.convo.convo_partners,h.me,this.$element.find(".send").val()),this.convo.add_message(e),this.renderDiscussion(),h.server.emit("message",e),this.$element.find(".send").val(""),this.emitTypingNotification()},e.prototype.toggleChat=function(e){return e.preventDefault(),this.$discussion.toggle(),this.$discussion.attr("display")===!1?this.scrollToLastMessage:void 0},e.prototype.closeWindow=function(e){return e.preventDefault(),e.stopPropagation(),h.server.removeAllListeners(),this.$element.find(".chat-close").off(),this.$element.find(".send").off(),this.$element.find(".send").off(),this.$element.find(".top-bar").off(),this.$element.off(),this.$discussion.off(),this.$element.remove(),delete this},e.prototype.removeNotifications=function(){return this.$element.find(".top-bar").removeClass("new-message"),h.title_notification.notified?this.clearTitleNotification():void 0},e.prototype.emitTypingNotification=function(){return""!==this.$element.find(".send").val()?h.server.emit("user_typing",this.convo.convo_partners_image_urls,h.me,!0):h.server.emit("user_typing",this.convo.convo_partners_image_urls,h.me,!1)},e.prototype.clearTitleNotification=function(){return h.clearAlert(),$("html title").html(h.title_notification.page_title),h.title_notification.notified=!1},e.prototype.titleAlert=function(){var e,t,s,i;return h.title_notification.notified?void 0:(console.log(this.convo.messages[this.convo.messages.length-1]),t=this.convo.messages[this.convo.messages.length-1].sender.display_name,e="Pending ** "+t,s=function(){return $("html title").html($("html title").html()===h.title_notification.page_title?e:h.title_notification.page_title)},i=setInterval(s,2200),h.clear_alert=function(){return clearInterval(i)},h.title_notification.notified=!0)},e.prototype.file_upload=function(){var e;return e=this.$discussion.find(".picture_upload").get(0).files[0],h.oauth.file_upload(e,this.convo.convo_partners_image_urls,h.me.image_url)},e}(),t.exports=s},{"./app.coffee":19,"./conversation_model.coffee":22,"./message_model.coffee":23,"./message_view.coffee":24,"./templates/chat_room.hbs":27,"hbsfy/runtime":18}],21:[function(e,t){var s,i,n,r,o,a,h;r=e("./app.coffee"),n=e("./user_view.coffee"),i=e("./persistent_conversation_view.coffee"),a=e("./templates/logged_out.hbs"),o=e("./templates/logged_in.hbs"),h=e("./templates/profile.hbs"),s=function(){function e(){this.menu="default",$("body").append(a()),$("ul.login-bar").hide(),$(".parley .persistent-bar.logged-out").on("click",function(){return $("ul.login-bar").toggle()})}return e.prototype.log_in=function(){return $(".parley .persistent-bar.logged_out").off(),this.$element=$(o(r.me)),$(".parley section.controller").html(this.$element),$(".parley div.controller-bar a.messages").on("click",this.toggle_persistent_convos.bind(this)),$(".parley div.controller-bar a.active-users").on("click",this.toggle_current_users.bind(this)),$(".parley div.controller-bar a.user-settings").on("click",this.toggle_user_settings.bind(this))},e.prototype.toggle_command_center=function(e){return e.preventDefault(),logged_out?$(".persistent-bar.logged-out").on("click",function(){return $("#log-click").toggle(),$("ul.login-bar").slideToggle()}):$(function(){return $(".persistent-bar").on("click",function(){return $(".controller-view").toggle()})})},e.prototype.toggle_current_users=function(e){var t,s,i,o,a;if(e.preventDefault(),$(".parley div.controller-view").children().remove(),"current_users"!==this.menu){for(a=r.current_users,i=0,o=a.length;o>i;i++)t=a[i],s=new n(t),s.render(),$(".parley div.controller-view").append(s.$element);return this.menu="current_users"}return this.menu=null},e.prototype.toggle_persistent_convos=function(e){var t,s,n,o,a;if(e.preventDefault(),$(".parley div.controller-view").children().remove(),"persistent_convos"!==this.menu){for(a=r.conversations,n=0,o=a.length;o>n;n++)t=a[n],s=new i(t),s.render(),$(".parley div.controller-view").append(s.$element);return this.menu="persistent_convos"}return this.menu=null},e.prototype.toggle_user_settings=function(e){return e.preventDefault,$(".parley div.controller-view").children().remove(),"user_settings"!==this.menu?($(".parley div.controller-view").html(h(r.me)),this.menu="user_settings"):this.menu=null},e}(),t.exports=new s},{"./app.coffee":19,"./persistent_conversation_view.coffee":26,"./templates/logged_in.hbs":29,"./templates/logged_out.hbs":30,"./templates/profile.hbs":33,"./user_view.coffee":35}],22:[function(e,t){var s,i;i=e("./app.coffee"),s=function(){function e(e,t){var s,i,n,r,o,a;for(this.convo_partners=e,this.messages=null!=t?t:[],this.generate_message_filter(),console.log(this.message_filter),this.first_name_list="",this.convo_partners_image_urls=[],a=this.convo_partners,i=r=0,o=a.length;o>r;i=++r)n=a[i],s=n.display_name.match(/^[A-z]+/),i+1!==this.convo_partners.length?(this.first_name_list+=""+s+", ",this.convo_partners_image_urls.push(n.image_url)):(this.first_name_list+=""+s,this.convo_partners_image_urls.push(n.image_url))}return e.prototype.add_message=function(e){return this.messages.push(e)},e.prototype.generate_message_filter=function(){var e,t,s,n;for(this.message_filter=[i.me.image_url],n=this.convo_partners,t=0,s=n.length;s>t;t++)e=n[t],this.message_filter.push(e.image_url);return this.message_filter=this.message_filter.sort().join()},e}(),t.exports=s},{"./app.coffee":19}],23:[function(e,t){var s,i;i=e("./app.coffee"),s=function(){function e(e,t,s,i){var n,r,o,a,h;for(this.recipients=e,this.sender=t,this.content=s,this.time_stamp=i,this.time_stamp||(this.time_stamp=(new Date).toUTCString()),n=[],h=this.recipients,o=0,a=h.length;a>o;o++)r=h[o],n=n.concat(r.image_url);n=n.concat(this.sender.image_url),this.convo_key=n.sort().join(),this.time_created=new Date(this.time_stamp),this.time_since_created=this.calculate_time()}return e.prototype.calculate_time=function(){var e,t,s,i,n,r;return e=new Date,n=Math.floor((e-this.time_created)/6e4),e.getDate()===this.time_created.getDate()&&1440>n&&(r=!0),s=Math.floor(n/60),i=Math.floor(n%60),60>n?""+n+" mins ago":4>s?0===i?""+s+" hours ago":""+s+" hour "+i+" min ago":(t=this.date_formatter(),r?""+t.hour+":"+t.minutes+" "+t.suffix:""+t.month+" "+t.day+" | "+t.hour+":"+t.minutes+" "+t.suffix)},e.prototype.date_formatter=function(){var e,t,s,i,n,r,o;switch(this.time_created.getMonth()){case 0:r="Jan";break;case 1:r="Feb";break;case 2:r="Mar";break;case 3:r="Apr";break;case 4:r="May";break;case 5:r="Jun";break;case 6:r="Jul";break;case 7:r="Aug";break;case 8:r="Sep";break;case 9:r="Oct";break;case 10:r="Nov";break;case 11:r="Dec"}return t=this.time_created.getHours(),t>12?(o="PM",i=t-12):(o="AM",i=t),s=this.time_created.getMinutes(),n=10>s?"0"+s:""+s,e={month:r,day:this.time_created.getDate(),hour:i,minutes:n,suffix:o}},e}(),t.exports=s},{"./app.coffee":19}],24:[function(e,t){var s,i,n,r;n=e("./app.coffee"),r=e("./templates/message.hbs"),s=e("hbsfy/runtime"),i=function(){function e(e){this.message=e}return e.prototype.render=function(){return this.$element=this.message.sender.image_url===n.me.image_url?$('<li class="self"></li>').append(r(this.message)):$('<li class="other"></li>').append(r(this.message))},e}(),t.exports=i},{"./app.coffee":19,"./templates/message.hbs":31,"hbsfy/runtime":18}],25:[function(e,t){var s,i,n,r;r=e("./app.coffee"),n=e("./user_model.coffee"),s=e("./message_model.coffee"),i=function(){function e(){}return window.sign_in_callback=function(t){return t.status.signed_in?(gapi.client.load("plus","v1",function(){var e;return e=gapi.client.plus.people.get({userId:"me"}),e.execute(function(e){var t,s;return t=e.displayName,s=e.image.url,r.me=new n(t,s),r.server.emit("join",t,s),r.command_center.log_in()})}),e.file_upload=function(e,i,n){return $.ajax({url:"https://www.googleapis.com/upload/storage/v1beta2/b/parley-images/o?uploadType=media&name="+e.name,type:"POST",data:e,contentType:e.type,processData:!1,headers:{Authorization:"Bearer "+t.access_token},success:function(e){return function(t){var o,a,h;return o="https://storage.cloud.google.com/parley-images/"+t.name,h="<img src="+o+" />",r.server.emit("message",h,i,n),a=new s(i,n,h),e.convo.messages.add_message(a),e.render()}}(this)})}):console.log("Sign-in state: "+t.error)},e}(),t.exports=new i},{"./app.coffee":19,"./message_model.coffee":23,"./user_model.coffee":34}],26:[function(e,t){var s,i,n,r,o;r=e("./app.coffee"),s=e("./chat_room_view.coffee"),i=e("handlebars"),o=e("./templates/persistent_convo_reg.hbs"),i=e("hbsfy/runtime"),i.registerHelper("retrieve_image",function(){return this.convo_partners_image_urls[0]}),i.registerHelper("retrieve_last_message",function(){return this.messages[this.messages.length-1].content}),i.registerHelper("calculate_last_message_time",function(){return this.messages[this.messages.length-1].calculate_time()}),n=function(){function e(e){this.convo=e,this.$element=$('<div class="message existing"></div>'),this.$element.on("click",this.load_convo.bind(this))}return e.prototype.render=function(){return this.$element.html(o(this.convo))},e.prototype.load_convo=function(){var e,t,i,n,o,a;for(i="closed",a=r.open_conversations,n=0,o=a.length;o>n;n++)t=a[n],this.convo.message_filter===t.message_filter&&(i="open");return"open"===i||(e=new s(this.convo),r.open_conversations.push(this.convo.message_filter),this.$element.parent().hasClass("controller-view"))?void 0:this.$element.parents("div.parley").remove()},e}(),t.exports=n},{"./app.coffee":19,"./chat_room_view.coffee":20,"./templates/persistent_convo_reg.hbs":32,handlebars:16,"hbsfy/runtime":18}],27:[function(e,t){var s=e("hbsfy/runtime");t.exports=s.template(function(e,t,s,i,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,e.helpers),n=n||{};var r,o,a="",h="function",l=this.escapeExpression;return a+='<div class="parley">\n  <section class="conversation">\n    <div class="top-bar">\n      <a>',(o=s.title_bar_function)?r=o.call(t,{hash:{},data:n}):(o=t&&t.title_bar_function,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+'</a>\n      <ul class="message-alt">\n        <li class="entypo-minus minify"></li>\n        <li class="entypo-resize-full"></li>\n        <li class="entypo-cancel chat-close"></li>\n      </ul>\n    </div>\n    <div class="message-bar">\n      <ul class="additional">\n        <li><a class="entypo-user-add"></a></li>\n        <li><a class="fontawesome-facetime-video"></a></li>\n      </ul>\n      <ul class="existing">\n        <li><a class="entypo-chat"></a></li>\n      </ul>\n    </div>\n    <ol class="discussion"></ol>\n    <textarea class="grw send" placeholder="Enter Message..."></textarea>\n    <label class="img_upload entypo-camera">\n      <span>\n        <input class="parley_file_upload" name="img_upload" type="file" /></label>\n      </span>\n  </section>\n</div>'})},{"hbsfy/runtime":18}],28:[function(e,t){var s=e("hbsfy/runtime");t.exports=s.template(function(e,t,s,i,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,e.helpers),n=n||{};var r,o,a="",h="function",l=this.escapeExpression;return a+='<div class="avatar">\n  <img src= ',(o=s.image_url)?r=o.call(t,{hash:{},data:n}):(o=t&&t.image_url,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+' />\n</div>\n<div class="content">\n  <h2>',(o=s.display_name)?r=o.call(t,{hash:{},data:n}):(o=t&&t.display_name,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+"</h2>\n</div>\n"})},{"hbsfy/runtime":18}],29:[function(e,t){var s=e("hbsfy/runtime");t.exports=s.template(function(e,t,s,i,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,e.helpers),n=n||{};var r,o,a="",h="function",l=this.escapeExpression;return a+='<div class="controller-view">\n</div>\n<div class="controller-bar">\n  <ul class="utility-bar horizontal-list">\n    <li>\n      <a class="messages" href="#">\n        <span class="entypo-chat"></span>\n      </a>\n    </li>\n    <li>\n      <a class="active-users" href="#">\n        <span class="entypo-users"></span>\n      </a>\n    </li>\n    <li>\n      <a class="user-settings" href="#">\n        <span class="fontawesome-cog"></span>\n      </a>\n    </li>\n  </ul>\n  <div class="persistent-bar">\n    <a>',(o=s.display_name)?r=o.call(t,{hash:{},data:n}):(o=t&&t.display_name,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+'</a>\n    <span class="fontawesome-reorder"></span>\n  </div>\n</div>'})},{"hbsfy/runtime":18}],30:[function(e,t){var s=e("hbsfy/runtime");t.exports=s.template(function(e,t,s,i,n){return this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,e.helpers),n=n||{},'<div class="parley">\n  <section class="controller">\n    <div class="controller-view">\n      <div class="g-signin login-bar"\n        data-callback="sign_in_callback"\n        data-clientid="1027427116765-9c18ckuo07r5ms0aclbfjsmcpd3jrmtc.apps.googleusercontent.com"\n        data-cookiepolicy="single_host_origin"\n        data-theme="none"\n        data-scope="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/devstorage.read_write">\n        <li class="btn">\n          <a class="entypo-gplus"></a>\n        </li>\n        <li class="aside">\n          <a> Sign in with google</a>\n        </li>\n      </div>\n    </div>\n    <div class="persistent-bar logged-out">\n      <a id="log-click"> click here to login!</a>\n      <span class="fontawesome-reorder"></span>\n    </div>\n  </section>\n</div>'
})},{"hbsfy/runtime":18}],31:[function(e,t){var s=e("hbsfy/runtime");t.exports=s.template(function(e,t,s,i,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,e.helpers),n=n||{};var r,o,a="",h="function",l=this.escapeExpression;return a+='<div class="avatar">\n  <img src='+l((r=t&&t.sender,r=null==r||r===!1?r:r.image_url,typeof r===h?r.apply(t):r))+' />\n</div>\n<div class="message status">\n  <h2>'+l((r=t&&t.sender,r=null==r||r===!1?r:r.display_name,typeof r===h?r.apply(t):r))+"</h2>\n  <p>",(o=s.content)?r=o.call(t,{hash:{},data:n}):(o=t&&t.content,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+'</p>\n  <a class="time">\n    <span class="entypo-clock">   ',(o=s.time_since_created)?r=o.call(t,{hash:{},data:n}):(o=t&&t.time_since_created,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+"</span>\n  </a>\n</div>"})},{"hbsfy/runtime":18}],32:[function(e,t){var s=e("hbsfy/runtime");t.exports=s.template(function(e,t,s,i,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,e.helpers),n=n||{};var r,o,a="",h="function",l=this.escapeExpression;return a+='<div class="avatar">\n  <img src=',(o=s.retrieve_image)?r=o.call(t,{hash:{},data:n}):(o=t&&t.retrieve_image,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+' />\n</div>\n<div class="content status entypo-right-open-big">\n  <h2>'+l((r=t&&t.convo_partner,r=null==r||r===!1?r:r.display_name,typeof r===h?r.apply(t):r))+"</h2>\n  <p>",(o=s.retrieve_last_message)?r=o.call(t,{hash:{},data:n}):(o=t&&t.retrieve_last_message,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+'</p>\n  <a class="time">\n    <span class="entypo-clock"> ',(o=s.calculate_last_message_time)?r=o.call(t,{hash:{},data:n}):(o=t&&t.calculate_last_message_time,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+"</span>\n  </a>\n</div>\n"})},{"hbsfy/runtime":18}],33:[function(e,t){var s=e("hbsfy/runtime");t.exports=s.template(function(e,t,s,i,n){this.compilerInfo=[4,">= 1.0.0"],s=this.merge(s,e.helpers),n=n||{};var r,o,a="",h="function",l=this.escapeExpression;return a+='<div class="default-view">\n  <figure>\n    <img src=',(o=s.image_url)?r=o.call(t,{hash:{},data:n}):(o=t&&t.image_url,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+" />\n    <h2>",(o=s.display_name)?r=o.call(t,{hash:{},data:n}):(o=t&&t.display_name,r=typeof o===h?o.call(t,{hash:{},data:n}):o),a+=l(r)+"</h2>\n  </figure>\n</div>"})},{"hbsfy/runtime":18}],34:[function(e,t){var s,i;i=e("./app.coffee"),s=function(){function e(e,t){this.display_name=e,this.image_url=t,this.status="active"}return e}(),t.exports=s},{"./app.coffee":19}],35:[function(e,t){var s,i,n,r,o;r=e("./app.coffee"),s=e("./chat_room_view.coffee"),i=e("./conversation_model.coffee"),o=e("./templates/current_user.hbs"),n=function(){function e(e,t){this.current_user=e,this.chat_room=t,this.$element=$("<li class='user'></li>"),this.$element.on("click",this.user_interact_callback.bind(this))}return e.prototype.render=function(){return this.$element.html(o(this.current_user))},e.prototype.user_interact_callback=function(){return console.log("got the click"),this.$element.parent().hasClass("controller-view")?(console.log("Im here!"),this.open_conversation()):(console.log("what is happening?"),this.chat_room.add_member(this.current_user))},e.prototype.open_conversation=function(){var e,t,n,o,a,h,l,c,p,u,f;for(console.log(r.open_conversations),a=[r.me.image_url,this.current_user.image_url].sort().join(),u=r.open_conversations,h=0,c=u.length;c>h;h++)if(n=u[h],convo_key===n.message_filter)return;for(o=!1,f=r.conversations,l=0,p=f.length;p>l;l++)n=f[l],n.message_filter===convo_key&&(o=!0,n=n);return o?(e=new s(n),r.open_conversations.push(convo_key)):(t=new i([this.current_user]),e=new s(t),r.conversations.push(t),r.open_conversations.push(convo_key))},e}(),t.exports=n},{"./app.coffee":19,"./chat_room_view.coffee":20,"./conversation_model.coffee":22,"./templates/current_user.hbs":28}]},{},[19]);
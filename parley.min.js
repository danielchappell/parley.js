!function e(t,n,i){function s(r,a){if(!n[r]){if(!t[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(o)return o(r,!0);throw new Error("Cannot find module '"+r+"'")}var l=n[r]={exports:{}};t[r][0].call(l.exports,function(e){var n=t[r][1][e];return s(n?n:e)},l,l.exports,e,t,n,i)}return n[r].exports}for(var o="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(){},{}],2:[function(e,t,n){"use strict";var i=e("./handlebars.runtime")["default"],s=e("./handlebars/compiler/ast")["default"],o=e("./handlebars/compiler/base").parser,r=e("./handlebars/compiler/base").parse,a=e("./handlebars/compiler/compiler").Compiler,c=e("./handlebars/compiler/compiler").compile,l=e("./handlebars/compiler/compiler").precompile,p=e("./handlebars/compiler/javascript-compiler")["default"],h=i.create,u=function(){var e=h();return e.compile=function(t,n){return c(t,n,e)},e.precompile=function(t,n){return l(t,n,e)},e.AST=s,e.Compiler=a,e.JavaScriptCompiler=p,e.Parser=o,e.parse=r,e};i=u(),i.create=u,n["default"]=i},{"./handlebars.runtime":3,"./handlebars/compiler/ast":5,"./handlebars/compiler/base":6,"./handlebars/compiler/compiler":7,"./handlebars/compiler/javascript-compiler":8}],3:[function(e,t,n){"use strict";var i=e("./handlebars/base"),s=e("./handlebars/safe-string")["default"],o=e("./handlebars/exception")["default"],r=e("./handlebars/utils"),a=e("./handlebars/runtime"),c=function(){var e=new i.HandlebarsEnvironment;return r.extend(e,i),e.SafeString=s,e.Exception=o,e.Utils=r,e.VM=a,e.template=function(t){return a.template(t,e)},e},l=c();l.create=c,n["default"]=l},{"./handlebars/base":4,"./handlebars/exception":12,"./handlebars/runtime":13,"./handlebars/safe-string":14,"./handlebars/utils":15}],4:[function(e,t,n){"use strict";function i(e,t){this.helpers=e||{},this.partials=t||{},s(this)}function s(e){e.registerHelper("helperMissing",function(e){if(2===arguments.length)return void 0;throw new a("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},s=n.fn;return u(t)&&(t=t.call(this)),t===!0?s(this):t===!1||null==t?i(this):h(t)?t.length>0?e.helpers.each(t,n):i(this):s(t)}),e.registerHelper("each",function(e,t){var n,i=t.fn,s=t.inverse,o=0,r="";if(u(e)&&(e=e.call(this)),t.data&&(n=g(t.data)),e&&"object"==typeof e)if(h(e))for(var a=e.length;a>o;o++)n&&(n.index=o,n.first=0===o,n.last=o===e.length-1),r+=i(e[o],{data:n});else for(var c in e)e.hasOwnProperty(c)&&(n&&(n.key=c,n.index=o,n.first=0===o),r+=i(e[c],{data:n}),o++);return 0===o&&(r=s(this)),r}),e.registerHelper("if",function(e,t){return u(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return u(e)&&(e=e.call(this)),r.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function o(e,t){m.log(e,t)}var r=e("./utils"),a=e("./exception")["default"],c="1.3.0";n.VERSION=c;var l=4;n.COMPILER_REVISION=l;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};n.REVISION_CHANGES=p;var h=r.isArray,u=r.isFunction,f=r.toString,d="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:m,log:o,registerHelper:function(e,t,n){if(f.call(e)===d){if(n||t)throw new a("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){f.call(e)===d?r.extend(this.partials,e):this.partials[e]=t}};var m={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(m.level<=e){var n=m.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=m,n.log=o;var g=function(e){var t={};return r.extend(t,e),t};n.createFrame=g},{"./exception":12,"./utils":15}],5:[function(e,t,n){"use strict";function i(e){e=e||{},this.firstLine=e.first_line,this.firstColumn=e.first_column,this.lastColumn=e.last_column,this.lastLine=e.last_line}var s=e("../exception")["default"],o={ProgramNode:function(e,t,n,s){var r,a;3===arguments.length?(s=n,n=null):2===arguments.length&&(s=t,t=null),i.call(this,s),this.type="program",this.statements=e,this.strip={},n?(a=n[0],a?(r={first_line:a.firstLine,last_line:a.lastLine,last_column:a.lastColumn,first_column:a.firstColumn},this.inverse=new o.ProgramNode(n,t,r)):this.inverse=new o.ProgramNode(n,t),this.strip.right=t.left):t&&(this.strip.left=t.right)},MustacheNode:function(e,t,n,s,r){if(i.call(this,r),this.type="mustache",this.strip=s,null!=n&&n.charAt){var a=n.charAt(3)||n.charAt(2);this.escaped="{"!==a&&"&"!==a}else this.escaped=!!n;this.sexpr=e instanceof o.SexprNode?e:new o.SexprNode(e,t),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(e,t,n){i.call(this,n),this.type="sexpr",this.hash=t;var s=this.id=e[0],o=this.params=e.slice(1),r=this.eligibleHelper=s.isSimple;this.isHelper=r&&(o.length||t)},PartialNode:function(e,t,n,s){i.call(this,s),this.type="partial",this.partialName=e,this.context=t,this.strip=n},BlockNode:function(e,t,n,o,r){if(i.call(this,r),e.sexpr.id.original!==o.path.original)throw new s(e.sexpr.id.original+" doesn't match "+o.path.original,this);this.type="block",this.mustache=e,this.program=t,this.inverse=n,this.strip={left:e.strip.left,right:o.strip.right},(t||n).strip.left=e.strip.right,(n||t).strip.right=o.strip.left,n&&!t&&(this.isInverse=!0)},ContentNode:function(e,t){i.call(this,t),this.type="content",this.string=e},HashNode:function(e,t){i.call(this,t),this.type="hash",this.pairs=e},IdNode:function(e,t){i.call(this,t),this.type="ID";for(var n="",o=[],r=0,a=0,c=e.length;c>a;a++){var l=e[a].part;if(n+=(e[a].separator||"")+l,".."===l||"."===l||"this"===l){if(o.length>0)throw new s("Invalid path: "+n,this);".."===l?r++:this.isScoped=!0}else o.push(l)}this.original=n,this.parts=o,this.string=o.join("."),this.depth=r,this.isSimple=1===e.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(e,t){i.call(this,t),this.type="PARTIAL_NAME",this.name=e.original},DataNode:function(e,t){i.call(this,t),this.type="DATA",this.id=e},StringNode:function(e,t){i.call(this,t),this.type="STRING",this.original=this.string=this.stringModeValue=e},IntegerNode:function(e,t){i.call(this,t),this.type="INTEGER",this.original=this.integer=e,this.stringModeValue=Number(e)},BooleanNode:function(e,t){i.call(this,t),this.type="BOOLEAN",this.bool=e,this.stringModeValue="true"===e},CommentNode:function(e,t){i.call(this,t),this.type="comment",this.comment=e}};n["default"]=o},{"../exception":12}],6:[function(e,t,n){"use strict";function i(e){return e.constructor===o.ProgramNode?e:(s.yy=o,s.parse(e))}var s=e("./parser")["default"],o=e("./ast")["default"];n.parser=s,n.parse=i},{"./ast":5,"./parser":9}],7:[function(e,t,n){"use strict";function i(){}function s(e,t,n){if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var i=n.parse(e),s=(new n.Compiler).compile(i,t);return(new n.JavaScriptCompiler).compile(s,t)}function o(e,t,n){function i(){var i=n.parse(e),s=(new n.Compiler).compile(i,t),o=(new n.JavaScriptCompiler).compile(s,t,void 0,!0);return n.template(o)}if(null==e||"string"!=typeof e&&e.constructor!==n.AST.ProgramNode)throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0);var s;return function(e,t){return s||(s=i()),s.call(this,e,t)}}var r=e("../exception")["default"];n.Compiler=i,i.prototype={compiler:i,disassemble:function(){for(var e,t,n,i=this.opcodes,s=[],o=0,r=i.length;r>o;o++)if(e=i[o],"DECLARE"===e.opcode)s.push("DECLARE "+e.name+"="+e.value);else{t=[];for(var a=0;a<e.args.length;a++)n=e.args[a],"string"==typeof n&&(n='"'+n.replace("\n","\\n")+'"'),t.push(n);s.push(e.opcode+" "+t.join(" "))}return s.join("\n")},equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var n=0;t>n;n++){var i=this.opcodes[n],s=e.opcodes[n];if(i.opcode!==s.opcode||i.args.length!==s.args.length)return!1;for(var o=0;o<i.args.length;o++)if(i.args[o]!==s.args[o])return!1}if(t=this.children.length,e.children.length!==t)return!1;for(n=0;t>n;n++)if(!this.children[n].equals(e.children[n]))return!1;return!0},guid:0,compile:function(e,t){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=t;var n=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},n)for(var i in n)this.options.knownHelpers[i]=n[i];return this.accept(e)},accept:function(e){var t,n=e.strip||{};return n.left&&this.opcode("strip"),t=this[e.type](e),n.right&&this.opcode("strip"),t},program:function(e){for(var t=e.statements,n=0,i=t.length;i>n;n++)this.accept(t[n]);return this.isSimple=1===i,this.depths.list=this.depths.list.sort(function(e,t){return e-t}),this},compileProgram:function(e){var t,n=(new this.compiler).compile(e,this.options),i=this.guid++;this.usePartial=this.usePartial||n.usePartial,this.children[i]=n;for(var s=0,o=n.depths.list.length;o>s;s++)t=n.depths.list[s],2>t||this.addDepth(t-1);return i},block:function(e){var t=e.mustache,n=e.program,i=e.inverse;n&&(n=this.compileProgram(n)),i&&(i=this.compileProgram(i));var s=t.sexpr,o=this.classifySexpr(s);"helper"===o?this.helperSexpr(s,n,i):"simple"===o?(this.simpleSexpr(s),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(s,n,i),this.opcode("pushProgram",n),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(e){var t,n,i=e.pairs;this.opcode("pushHash");for(var s=0,o=i.length;o>s;s++)t=i[s],n=t[1],this.options.stringParams?(n.depth&&this.addDepth(n.depth),this.opcode("getContext",n.depth||0),this.opcode("pushStringParam",n.stringModeValue,n.type),"sexpr"===n.type&&this.sexpr(n)):this.accept(n),this.opcode("assignToHash",t[0]);this.opcode("popHash")},partial:function(e){var t=e.partialName;this.usePartial=!0,e.context?this.ID(e.context):this.opcode("push","depth0"),this.opcode("invokePartial",t.name),this.opcode("append")},content:function(e){this.opcode("appendContent",e.string)},mustache:function(e){this.sexpr(e.sexpr),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(e,t,n){var i=e.id,s=i.parts[0],o=null!=t||null!=n;this.opcode("getContext",i.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",n),this.opcode("invokeAmbiguous",s,o)},simpleSexpr:function(e){var t=e.id;"DATA"===t.type?this.DATA(t):t.parts.length?this.ID(t):(this.addDepth(t.depth),this.opcode("getContext",t.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,n){var i=this.setupFullMustacheParams(e,t,n),s=e.id.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",i.length,s);else{if(this.options.knownHelpersOnly)throw new r("You specified knownHelpersOnly, but used the unknown helper "+s,e);this.opcode("invokeHelper",i.length,s,e.isRoot)}},sexpr:function(e){var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ID:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0];t?this.opcode("lookupOnContext",e.parts[0]):this.opcode("pushContext");for(var n=1,i=e.parts.length;i>n;n++)this.opcode("lookup",e.parts[n])},DATA:function(e){if(this.options.data=!0,e.id.isScoped||e.id.depth)throw new r("Scoped data references are not supported: "+e.original,e);this.opcode("lookupData");for(var t=e.id.parts,n=0,i=t.length;i>n;n++)this.opcode("lookup",t[n])},STRING:function(e){this.opcode("pushString",e.string)},INTEGER:function(e){this.opcode("pushLiteral",e.integer)},BOOLEAN:function(e){this.opcode("pushLiteral",e.bool)},comment:function(){},opcode:function(e){this.opcodes.push({opcode:e,args:[].slice.call(arguments,1)})},declare:function(e,t){this.opcodes.push({opcode:"DECLARE",name:e,value:t})},addDepth:function(e){0!==e&&(this.depths[e]||(this.depths[e]=!0,this.depths.list.push(e)))},classifySexpr:function(e){var t=e.isHelper,n=e.eligibleHelper,i=this.options;if(n&&!t){var s=e.id.parts[0];i.knownHelpers[s]?t=!0:i.knownHelpersOnly&&(n=!1)}return t?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t,n=e.length;n--;)t=e[n],this.options.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):this[t.type](t)},setupFullMustacheParams:function(e,t,n){var i=e.params;return this.pushParams(i),this.opcode("pushProgram",t),this.opcode("pushProgram",n),e.hash?this.hash(e.hash):this.opcode("emptyHash"),i}},n.precompile=s,n.compile=o},{"../exception":12}],8:[function(e,t,n){"use strict";function i(e){this.value=e}function s(){}var o=e("../base").COMPILER_REVISION,r=e("../base").REVISION_CHANGES,a=e("../base").log,c=e("../exception")["default"];s.prototype={nameLookup:function(e,t){var n,i;return 0===e.indexOf("depth")&&(n=!0),i=/^[0-9]+$/.test(t)?e+"["+t+"]":s.isValidJavaScriptVariableName(t)?e+"."+t:e+"['"+t+"']",n?"("+e+" && "+i+")":i},compilerInfo:function(){var e=o,t=r[e];return"this.compilerInfo = ["+e+",'"+t+"'];\n"},appendToBuffer:function(e){return this.environment.isSimple?"return "+e+";":{appendToBuffer:!0,content:e,toString:function(){return"buffer += "+e+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(e,t,n,i){this.environment=e,this.options=t||{},a("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!n,this.context=n||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(e,t);var s,o=e.opcodes;this.i=0;for(var r=o.length;this.i<r;this.i++)s=o[this.i],"DECLARE"===s.opcode?this[s.name]=s.value:this[s.opcode].apply(this,s.args),s.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c("Compile completed with content left on stack");return this.createFunctionContext(i)},preamble:function(){var e=[];if(this.isChild)e.push("");else{var t=this.namespace,n="helpers = this.merge(helpers, "+t+".helpers);";this.environment.usePartial&&(n=n+" partials = this.merge(partials, "+t+".partials);"),this.options.data&&(n+=" data = data || {};"),e.push(n)}e.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=e},createFunctionContext:function(e){var t=this.stackVars.concat(this.registers.list);if(t.length>0&&(this.source[1]=this.source[1]+", "+t.join(", ")),!this.isChild)for(var n in this.context.aliases)this.context.aliases.hasOwnProperty(n)&&(this.source[1]=this.source[1]+", "+n+"="+this.context.aliases[n]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var i=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],s=0,o=this.environment.depths.list.length;o>s;s++)i.push("depth"+this.environment.depths.list[s]);var r=this.mergeSource();if(this.isChild||(r=this.compilerInfo()+r),e)return i.push(r),Function.apply(this,i);var c="function "+(this.name||"")+"("+i.join(",")+") {\n  "+r+"}";return a("debug",c+"\n\n"),c},mergeSource:function(){for(var e,t="",n=0,i=this.source.length;i>n;n++){var s=this.source[n];s.appendToBuffer?e=e?e+"\n    + "+s.content:s.content:(e&&(t+="buffer += "+e+";\n  ",e=void 0),t+=s+"\n  ")}return t},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e),this.replaceStack(function(t){return e.splice(1,0,t),"blockHelperMissing.call("+e.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=["depth0"];this.setupParams(0,e);var t=this.topStack();e.splice(1,0,t),this.pushSource("if (!"+this.lastHelper+") { "+t+" = blockHelperMissing.call("+e.join(", ")+"); }")},appendContent:function(e){this.pendingContent&&(e=this.pendingContent+e),this.stripNext&&(e=e.replace(/^\s+/,"")),this.pendingContent=e},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"},append:function(){this.flushInline();var e=this.popStack();this.pushSource("if("+e+" || "+e+" === 0) { "+this.appendToBuffer(e)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(e){this.lastContext!==e&&(this.lastContext=e)},lookupOnContext:function(e){this.push(this.nameLookup("depth"+this.lastContext,e,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(e){return"typeof "+e+" === functionType ? "+e+".apply(depth0) : "+e})},lookup:function(e){this.replaceStack(function(t){return t+" == null || "+t+" === false ? "+t+" : "+this.nameLookup(t,e,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(e,t){this.pushStackLiteral("depth"+this.lastContext),this.pushString(t),"sexpr"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+e.contexts.join(",")+"}"),this.push("{"+e.types.join(",")+"}")),this.push("{\n    "+e.values.join(",\n    ")+"\n  }")},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},push:function(e){return this.inlineStack.push(e),e},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},invokeHelper:function(e,t,n){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var i=this.lastHelper=this.setupHelper(e,t,!0),s=this.nameLookup("depth"+this.lastContext,t,"context"),o="helper = "+i.name+" || "+s;i.paramsInit&&(o+=","+i.paramsInit),this.push("("+o+",helper ? helper.call("+i.callParams+") : helperMissing.call("+i.helperMissingParams+"))"),n||this.flushInline()},invokeKnownHelper:function(e,t){var n=this.setupHelper(e,t);this.push(n.name+".call("+n.callParams+")")},invokeAmbiguous:function(e,t){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var n=this.setupHelper(0,e,t),i=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=this.nameLookup("depth"+this.lastContext,e,"context"),o=this.nextStack();n.paramsInit&&this.pushSource(n.paramsInit),this.pushSource("if (helper = "+i+") { "+o+" = helper.call("+n.callParams+"); }"),this.pushSource("else { helper = "+s+"; "+o+" = typeof helper === functionType ? helper.call("+n.callParams+") : helper; }")},invokePartial:function(e){var t=[this.nameLookup("partials",e,"partial"),"'"+e+"'",this.popStack(),"helpers","partials"];this.options.data&&t.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+t.join(", ")+")")},assignToHash:function(e){var t,n,i=this.popStack();this.options.stringParams&&(n=this.popStack(),t=this.popStack());var s=this.hash;t&&s.contexts.push("'"+e+"': "+t),n&&s.types.push("'"+e+"': "+n),s.values.push("'"+e+"': ("+i+")")},compiler:s,compileChildren:function(e,t){for(var n,i,s=e.children,o=0,r=s.length;r>o;o++){n=s[o],i=new this.compiler;var a=this.matchExistingProgram(n);null==a?(this.context.programs.push(""),a=this.context.programs.length,n.index=a,n.name="program"+a,this.context.programs[a]=i.compile(n,t,this.context),this.context.environments[a]=n):(n.index=a,n.name="program"+a)}},matchExistingProgram:function(e){for(var t=0,n=this.context.environments.length;n>t;t++){var i=this.context.environments[t];if(i&&i.equals(e))return t}},programExpression:function(e){if(this.context.aliases.self="this",null==e)return"self.noop";for(var t,n=this.environment.children[e],i=n.depths.list,s=[n.index,n.name,"data"],o=0,r=i.length;r>o;o++)t=i[o],s.push(1===t?"depth0":"depth"+(t-1));return(0===i.length?"self.program(":"self.programWithDepth(")+s.join(", ")+")"},register:function(e,t){this.useRegister(e),this.pushSource(e+" = "+t+";")},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},pushStackLiteral:function(e){return this.push(new i(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),e&&this.source.push(e)},pushStack:function(e){this.flushInline();var t=this.incrStack();return e&&this.pushSource(t+" = "+e+";"),this.compileStack.push(t),t},replaceStack:function(e){var t,n,s,o="",r=this.isInline();if(r){var a=this.popStack(!0);if(a instanceof i)t=a.value,s=!0;else{n=!this.stackSlot;var c=n?this.incrStack():this.topStackName();o="("+this.push(c)+" = "+a+"),",t=this.topStack()}}else t=this.topStack();var l=e.call(this,t);return r?(s||this.popStack(),n&&this.stackSlot--,this.push("("+o+l+")")):(/^stack/.test(t)||(t=this.nextStack()),this.pushSource(t+" = ("+o+l+");")),t},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;if(e.length){this.inlineStack=[];for(var t=0,n=e.length;n>t;t++){var s=e[t];s instanceof i?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),n=(t?this.inlineStack:this.compileStack).pop();if(!e&&n instanceof i)return n.value;if(!t){if(!this.stackSlot)throw new c("Invalid stack pop");this.stackSlot--}return n},topStack:function(e){var t=this.isInline()?this.inlineStack:this.compileStack,n=t[t.length-1];return!e&&n instanceof i?n.value:n},quotedString:function(e){return'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(e,t,n){var i=[],s=this.setupParams(e,i,n),o=this.nameLookup("helpers",t,"helper");return{params:i,paramsInit:s,name:o,callParams:["depth0"].concat(i).join(", "),helperMissingParams:n&&["depth0",this.quotedString(t)].concat(i).join(", ")}},setupOptions:function(e,t){var n,i,s,o=[],r=[],a=[];o.push("hash:"+this.popStack()),this.options.stringParams&&(o.push("hashTypes:"+this.popStack()),o.push("hashContexts:"+this.popStack())),i=this.popStack(),s=this.popStack(),(s||i)&&(s||(this.context.aliases.self="this",s="self.noop"),i||(this.context.aliases.self="this",i="self.noop"),o.push("inverse:"+i),o.push("fn:"+s));for(var c=0;e>c;c++)n=this.popStack(),t.push(n),this.options.stringParams&&(a.push(this.popStack()),r.push(this.popStack()));return this.options.stringParams&&(o.push("contexts:["+r.join(",")+"]"),o.push("types:["+a.join(",")+"]")),this.options.data&&o.push("data:data"),o},setupParams:function(e,t,n){var i="{"+this.setupOptions(e,t).join(",")+"}";return n?(this.useRegister("options"),t.push("options"),"options="+i):(t.push(i),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),p=s.RESERVED_WORDS={},h=0,u=l.length;u>h;h++)p[l[h]]=!0;s.isValidJavaScriptVariableName=function(e){return!s.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)?!0:!1},n["default"]=s},{"../base":4,"../exception":12}],9:[function(e,t,n){"use strict";var i=function(){function e(e,t){return{left:"~"===e.charAt(2),right:"~"===t.charAt(0)||"~"===t.charAt(1)}}function t(){this.yy={}}var n={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(t,n,i,s,o,r){var a=r.length-1;switch(o){case 1:return new s.ProgramNode(r[a-1],this._$);case 2:return new s.ProgramNode([],this._$);case 3:this.$=new s.ProgramNode([],r[a-1],r[a],this._$);break;case 4:this.$=new s.ProgramNode(r[a-2],r[a-1],r[a],this._$);break;case 5:this.$=new s.ProgramNode(r[a-1],r[a],[],this._$);break;case 6:this.$=new s.ProgramNode(r[a],this._$);break;case 7:this.$=new s.ProgramNode([],this._$);break;case 8:this.$=new s.ProgramNode([],this._$);break;case 9:this.$=[r[a]];break;case 10:r[a-1].push(r[a]),this.$=r[a-1];break;case 11:this.$=new s.BlockNode(r[a-2],r[a-1].inverse,r[a-1],r[a],this._$);break;case 12:this.$=new s.BlockNode(r[a-2],r[a-1],r[a-1].inverse,r[a],this._$);break;case 13:this.$=r[a];break;case 14:this.$=r[a];break;case 15:this.$=new s.ContentNode(r[a],this._$);break;case 16:this.$=new s.CommentNode(r[a],this._$);break;case 17:this.$=new s.MustacheNode(r[a-1],null,r[a-2],e(r[a-2],r[a]),this._$);break;case 18:this.$=new s.MustacheNode(r[a-1],null,r[a-2],e(r[a-2],r[a]),this._$);break;case 19:this.$={path:r[a-1],strip:e(r[a-2],r[a])};break;case 20:this.$=new s.MustacheNode(r[a-1],null,r[a-2],e(r[a-2],r[a]),this._$);break;case 21:this.$=new s.MustacheNode(r[a-1],null,r[a-2],e(r[a-2],r[a]),this._$);break;case 22:this.$=new s.PartialNode(r[a-2],r[a-1],e(r[a-3],r[a]),this._$);break;case 23:this.$=e(r[a-1],r[a]);break;case 24:this.$=new s.SexprNode([r[a-2]].concat(r[a-1]),r[a],this._$);break;case 25:this.$=new s.SexprNode([r[a]],null,this._$);break;case 26:this.$=r[a];break;case 27:this.$=new s.StringNode(r[a],this._$);break;case 28:this.$=new s.IntegerNode(r[a],this._$);break;case 29:this.$=new s.BooleanNode(r[a],this._$);break;case 30:this.$=r[a];break;case 31:r[a-1].isHelper=!0,this.$=r[a-1];break;case 32:this.$=new s.HashNode(r[a],this._$);break;case 33:this.$=[r[a-2],r[a]];break;case 34:this.$=new s.PartialNameNode(r[a],this._$);break;case 35:this.$=new s.PartialNameNode(new s.StringNode(r[a],this._$),this._$);break;case 36:this.$=new s.PartialNameNode(new s.IntegerNode(r[a],this._$));break;case 37:this.$=new s.DataNode(r[a],this._$);break;case 38:this.$=new s.IdNode(r[a],this._$);break;case 39:r[a-2].push({part:r[a],separator:r[a-1]}),this.$=r[a-2];break;case 40:this.$=[{part:r[a]}];break;case 43:this.$=[];break;case 44:r[a-1].push(r[a]);break;case 47:this.$=[r[a]];break;case 48:r[a-1].push(r[a])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(e){throw new Error(e)
},parse:function(e){function t(){var e;return e=n.lexer.lex()||1,"number"!=typeof e&&(e=n.symbols_[e]||e),e}var n=this,i=[0],s=[null],o=[],r=this.table,a="",c=0,l=0,p=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var h=this.lexer.yylloc;o.push(h);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var f,d,m,g,y,v,_,b,k,S={};;){if(m=i[i.length-1],this.defaultActions[m]?g=this.defaultActions[m]:((null===f||"undefined"==typeof f)&&(f=t()),g=r[m]&&r[m][f]),"undefined"==typeof g||!g.length||!g[0]){var w="";if(!p){k=[];for(v in r[m])this.terminals_[v]&&v>2&&k.push("'"+this.terminals_[v]+"'");w=this.lexer.showPosition?"Parse error on line "+(c+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+k.join(", ")+", got '"+(this.terminals_[f]||f)+"'":"Parse error on line "+(c+1)+": Unexpected "+(1==f?"end of input":"'"+(this.terminals_[f]||f)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[f]||f,line:this.lexer.yylineno,loc:h,expected:k})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+f);switch(g[0]){case 1:i.push(f),s.push(this.lexer.yytext),o.push(this.lexer.yylloc),i.push(g[1]),f=null,d?(f=d,d=null):(l=this.lexer.yyleng,a=this.lexer.yytext,c=this.lexer.yylineno,h=this.lexer.yylloc,p>0&&p--);break;case 2:if(_=this.productions_[g[1]][1],S.$=s[s.length-_],S._$={first_line:o[o.length-(_||1)].first_line,last_line:o[o.length-1].last_line,first_column:o[o.length-(_||1)].first_column,last_column:o[o.length-1].last_column},u&&(S._$.range=[o[o.length-(_||1)].range[0],o[o.length-1].range[1]]),y=this.performAction.call(S,a,l,c,this.yy,g[1],s,o),"undefined"!=typeof y)return y;_&&(i=i.slice(0,-1*_*2),s=s.slice(0,-1*_),o=o.slice(0,-1*_)),i.push(this.productions_[g[1]][0]),s.push(S.$),o.push(S._$),b=r[i[i.length-2]][i[i.length-1]],i.push(b);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e;var t=e.match(/(?:\r\n?|\n).*/g);return t?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,n=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===i.length?this.yylloc.first_column:0)+i[i.length-n.length].length-n[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,n,i,s;this._more||(this.yytext="",this.match="");for(var o=this._currentRules(),r=0;r<o.length&&(n=this._input.match(this.rules[o[r]]),!n||t&&!(n[0].length>t[0].length)||(t=n,i=r,this.options.flex));r++);return t?(s=t[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,o[i],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e?e:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return"undefined"!=typeof e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,n,i){function s(e,n){return t.yytext=t.yytext.substr(e,t.yyleng-n)}switch(n){case 0:if("\\\\"===t.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return s(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return s(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return t.yytext=s(1,2).replace(/\\"/g,'"'),32;case 24:return t.yytext=s(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;case 27:return 34;case 28:return 33;case 29:return 40;case 30:return t.yytext=s(1,2),40;case 31:return"INVALID";case 32:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},e}();return n.lexer=i,t.prototype=n,n.Parser=t,new t}();n["default"]=i},{}],10:[function(e,t,n){"use strict";function i(e){return(new s).accept(e)}function s(){this.padding=0}var o=e("./visitor")["default"];n.print=i,n.PrintVisitor=s,s.prototype=new o,s.prototype.pad=function(e,t){for(var n="",i=0,s=this.padding;s>i;i++)n+="  ";return n+=e,t!==!1&&(n+="\n"),n},s.prototype.program=function(e){var t,n,i="",s=e.statements;for(t=0,n=s.length;n>t;t++)i+=this.accept(s[t]);return this.padding--,i},s.prototype.block=function(e){var t="";return t+=this.pad("BLOCK:"),this.padding++,t+=this.accept(e.mustache),e.program&&(t+=this.pad("PROGRAM:"),this.padding++,t+=this.accept(e.program),this.padding--),e.inverse&&(e.program&&this.padding++,t+=this.pad("{{^}}"),this.padding++,t+=this.accept(e.inverse),this.padding--,e.program&&this.padding--),this.padding--,t},s.prototype.sexpr=function(e){for(var t,n=e.params,i=[],s=0,o=n.length;o>s;s++)i.push(this.accept(n[s]));return n="["+i.join(", ")+"]",t=e.hash?" "+this.accept(e.hash):"",this.accept(e.id)+" "+n+t},s.prototype.mustache=function(e){return this.pad("{{ "+this.accept(e.sexpr)+" }}")},s.prototype.partial=function(e){var t=this.accept(e.partialName);return e.context&&(t=t+" "+this.accept(e.context)),this.pad("{{> "+t+" }}")},s.prototype.hash=function(e){for(var t,n,i=e.pairs,s=[],o=0,r=i.length;r>o;o++)t=i[o][0],n=this.accept(i[o][1]),s.push(t+"="+n);return"HASH{"+s.join(", ")+"}"},s.prototype.STRING=function(e){return'"'+e.string+'"'},s.prototype.INTEGER=function(e){return"INTEGER{"+e.integer+"}"},s.prototype.BOOLEAN=function(e){return"BOOLEAN{"+e.bool+"}"},s.prototype.ID=function(e){var t=e.parts.join("/");return e.parts.length>1?"PATH:"+t:"ID:"+t},s.prototype.PARTIAL_NAME=function(e){return"PARTIAL:"+e.name},s.prototype.DATA=function(e){return"@"+this.accept(e.id)},s.prototype.content=function(e){return this.pad("CONTENT[ '"+e.string+"' ]")},s.prototype.comment=function(e){return this.pad("{{! '"+e.comment+"' }}")}},{"./visitor":11}],11:[function(e,t,n){"use strict";function i(){}i.prototype={constructor:i,accept:function(e){return this[e.type](e)}},n["default"]=i},{}],12:[function(e,t,n){"use strict";function i(e,t){var n;t&&t.firstLine&&(n=t.firstLine,e+=" - "+n+":"+t.firstColumn);for(var i=Error.prototype.constructor.call(this,e),o=0;o<s.length;o++)this[s[o]]=i[s[o]];n&&(this.lineNumber=n,this.column=t.firstColumn)}var s=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,n["default"]=i},{}],13:[function(e,t,n){"use strict";function i(e){var t=e&&e[0]||1,n=h;if(t!==n){if(n>t){var i=u[n],s=u[t];throw new p("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+s+").")}throw new p("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function s(e,t){if(!t)throw new p("No environment passed to template");var n=function(e,n,i,s,o,r){var a=t.VM.invokePartial.apply(this,arguments);if(null!=a)return a;if(t.compile){var c={helpers:s,partials:o,data:r};return o[n]=t.compile(e,{data:void 0!==r},t),o[n](i,c)}throw new p("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:l.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=r(e,t,n):i||(i=this.programs[e]=r(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},l.extend(n,t),l.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,s){s=s||{};var o,r,a=s.partial?s:t;s.partial||(o=s.helpers,r=s.partials);var c=e.call(i,a,n,o,r,s.data);return s.partial||t.VM.checkRevision(i.compilerInfo),c}}function o(e,t,n){var i=Array.prototype.slice.call(arguments,3),s=function(e,s){return s=s||{},t.apply(this,[e,s.data||n].concat(i))};return s.program=e,s.depth=i.length,s}function r(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function a(e,t,n,i,s,o){var r={partial:!0,helpers:i,partials:s,data:o};if(void 0===e)throw new p("The partial "+t+" could not be found");return e instanceof Function?e(n,r):void 0}function c(){return""}var l=e("./utils"),p=e("./exception")["default"],h=e("./base").COMPILER_REVISION,u=e("./base").REVISION_CHANGES;n.checkRevision=i,n.template=s,n.programWithDepth=o,n.program=r,n.invokePartial=a,n.noop=c},{"./base":4,"./exception":12,"./utils":15}],14:[function(e,t,n){"use strict";function i(e){this.string=e}i.prototype.toString=function(){return""+this.string},n["default"]=i},{}],15:[function(e,t,n){"use strict";function i(e){return c[e]||"&amp;"}function s(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function o(e){return e instanceof a?e.toString():e||0===e?(e=""+e,p.test(e)?e.replace(l,i):e):""}function r(e){return e||0===e?f(e)&&0===e.length?!0:!1:!0}var a=e("./safe-string")["default"],c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},l=/[&<>"'`]/g,p=/[&<>"'`]/;n.extend=s;var h=Object.prototype.toString;n.toString=h;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)});var u;n.isFunction=u;var f=Array.isArray||function(e){return e&&"object"==typeof e?"[object Array]"===h.call(e):!1};n.isArray=f,n.escapeExpression=o,n.isEmpty=r},{"./safe-string":14}],16:[function(e,t){var n=e("../dist/cjs/handlebars")["default"];n.Visitor=e("../dist/cjs/handlebars/compiler/visitor")["default"];var i=e("../dist/cjs/handlebars/compiler/printer");if(n.PrintVisitor=i.PrintVisitor,n.print=i.print,t.exports=n,"undefined"!=typeof e&&e.extensions){var s=function(t,i){var s=e("fs"),o=s.readFileSync(i,"utf8");t.exports=n.compile(o)};e.extensions[".handlebars"]=s,e.extensions[".hbs"]=s}},{"../dist/cjs/handlebars":2,"../dist/cjs/handlebars/compiler/printer":10,"../dist/cjs/handlebars/compiler/visitor":11,fs:1}],17:[function(e,t){t.exports=e("./dist/cjs/handlebars.runtime")},{"./dist/cjs/handlebars.runtime":3}],18:[function(e,t){t.exports=e("handlebars/runtime")["default"]},{"handlebars/runtime":17}],19:[function(require,module,exports){(function(){var io=module.exports;if(function(e,t){var n=e;n.version="0.8.6",n.protocol=1,n.transports=[],n.j=[],n.sockets={},n.connect=function(e,i){var s,o,r=n.util.parseUri(e);t&&t.location&&(r.protocol=r.protocol||t.location.protocol.slice(0,-1),r.host=r.host||(t.document?t.document.domain:t.location.hostname),r.port=r.port||t.location.port),s=n.util.uniqueUri(r);var a={host:r.host,secure:"https"==r.protocol,port:r.port||("https"==r.protocol?443:80),query:r.query||""};return n.util.merge(a,i),(a["force new connection"]||!n.sockets[s])&&(o=new n.Socket(a)),!a["force new connection"]&&o&&(n.sockets[s]=o),o=o||n.sockets[s],o.of(r.path.length>1?r.path:"")}}("object"==typeof module?module.exports:this.io={},this),function(e,t){var n=e.util={},i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];n.parseUri=function(e){for(var t=i.exec(e||""),n={},o=14;o--;)n[s[o]]=t[o]||"";return n},n.uniqueUri=function(e){var n=e.protocol,i=e.host,s=e.port;return"document"in t?(i=i||document.domain,s=s||("https"==n&&"https:"!==document.location.protocol?443:document.location.port)):(i=i||"localhost",s||"https"!=n||(s=443)),(n||"http")+"://"+i+":"+(s||80)},n.query=function(e,t){var i=n.chunkQuery(e||""),s=[];n.merge(i,n.chunkQuery(t||""));for(var o in i)i.hasOwnProperty(o)&&s.push(o+"="+i[o]);return s.length?"?"+s.join("&"):""},n.chunkQuery=function(e){for(var t,n={},i=e.split("&"),s=0,o=i.length;o>s;++s)t=i[s].split("="),t[0]&&(n[t[0]]=decodeURIComponent(t[1]));return n};var o=!1;n.load=function(e){return"document"in t&&"complete"===document.readyState||o?e():void n.on(t,"load",e,!1)},n.on=function(e,t,n,i){e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener&&e.addEventListener(t,n,i)},n.request=function(e){if(e&&"undefined"!=typeof XDomainRequest)return new XDomainRequest;if("undefined"!=typeof XMLHttpRequest&&(!e||n.ua.hasCORS))return new XMLHttpRequest;if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return null},"undefined"!=typeof window&&n.load(function(){o=!0}),n.defer=function(e){return n.ua.webkit&&"undefined"==typeof importScripts?void n.load(function(){setTimeout(e,100)}):e()},n.merge=function(e,t,i,s){var o,r=s||[],a="undefined"==typeof i?2:i;for(o in t)t.hasOwnProperty(o)&&n.indexOf(r,o)<0&&("object"==typeof e[o]&&a?n.merge(e[o],t[o],a-1,r):(e[o]=t[o],r.push(t[o])));return e},n.mixin=function(e,t){n.merge(e.prototype,t.prototype)},n.inherit=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.intersect=function(e,t){for(var i=[],s=e.length>t.length?e:t,o=e.length>t.length?t:e,r=0,a=o.length;a>r;r++)~n.indexOf(s,o[r])&&i.push(o[r]);return i},n.indexOf=function(e,t,n){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t,n);for(var i=e.length,n=0>n?0>n+i?0:n+i:n||0;i>n&&e[n]!==t;n++);return n>=i?-1:n},n.toArray=function(e){for(var t=[],n=0,i=e.length;i>n;n++)t.push(e[n]);return t},n.ua={},n.ua.hasCORS="undefined"!=typeof XMLHttpRequest&&function(){try{var e=new XMLHttpRequest}catch(t){return!1}return void 0!=e.withCredentials}(),n.ua.webkit="undefined"!=typeof navigator&&/webkit/i.test(navigator.userAgent)}("undefined"!=typeof io?io:module.exports,this),function(e,t){function n(){}e.EventEmitter=n,n.prototype.on=function(e,n){return this.$events||(this.$events={}),this.$events[e]?t.util.isArray(this.$events[e])?this.$events[e].push(n):this.$events[e]=[this.$events[e],n]:this.$events[e]=n,this},n.prototype.addListener=n.prototype.on,n.prototype.once=function(e,t){function n(){i.removeListener(e,n),t.apply(this,arguments)}var i=this;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,n){if(this.$events&&this.$events[e]){var i=this.$events[e];if(t.util.isArray(i)){for(var s=-1,o=0,r=i.length;r>o;o++)if(i[o]===n||i[o].listener&&i[o].listener===n){s=o;break}if(0>s)return this;i.splice(s,1),i.length||delete this.$events[e]}else(i===n||i.listener&&i.listener===n)&&delete this.$events[e]}return this},n.prototype.removeAllListeners=function(e){return this.$events&&this.$events[e]&&(this.$events[e]=null),this},n.prototype.listeners=function(e){return this.$events||(this.$events={}),this.$events[e]||(this.$events[e]=[]),t.util.isArray(this.$events[e])||(this.$events[e]=[this.$events[e]]),this.$events[e]},n.prototype.emit=function(e){if(!this.$events)return!1;var n=this.$events[e];if(!n)return!1;var i=Array.prototype.slice.call(arguments,1);if("function"==typeof n)n.apply(this,i);else{if(!t.util.isArray(n))return!1;for(var s=n.slice(),o=0,r=s.length;r>o;o++)s[o].apply(this,i)}return!0}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(exports,nativeJSON){"use strict";function f(e){return 10>e?"0"+e:e}function date(e){return isFinite(e.valueOf())?e.getUTCFullYear()+"-"+f(e.getUTCMonth()+1)+"-"+f(e.getUTCDate())+"T"+f(e.getUTCHours())+":"+f(e.getUTCMinutes())+":"+f(e.getUTCSeconds())+"Z":null}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,s,o,r,a=gap,c=t[e];switch(c instanceof Date&&(c=date(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(c)){for(o=c.length,n=0;o>n;n+=1)r[n]=str(n,c)||"null";return s=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,s}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],s=str(i,c),s&&r.push(quote(i)+(gap?": ":":")+s));else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(s=str(i,c),s&&r.push(quote(i)+(gap?": ":":")+s));return s=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,s}}if(nativeJSON&&nativeJSON.parse)return exports.JSON={parse:nativeJSON.parse,stringify:nativeJSON.stringify};var JSON=exports.JSON={},cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})},JSON.parse=function(text,reviver){function walk(e,t){var n,i,s=e[t];if(s&&"object"==typeof s)for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(i=walk(s,n),void 0!==i?s[n]=i:delete s[n]);return reviver.call(e,t,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof JSON?JSON:void 0),function(e,t){var n=e.parser={},i=n.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],s=n.reasons=["transport not supported","client not handshaken","unauthorized"],o=n.advice=["reconnect"],r=t.JSON,a=t.util.indexOf;n.encodePacket=function(e){var t=a(i,e.type),n=e.id||"",c=e.endpoint||"",l=e.ack,p=null;switch(e.type){case"error":var h=e.reason?a(s,e.reason):"",u=e.advice?a(o,e.advice):"";(""!==h||""!==u)&&(p=h+(""!==u?"+"+u:""));break;case"message":""!==e.data&&(p=e.data);break;case"event":var f={name:e.name};e.args&&e.args.length&&(f.args=e.args),p=r.stringify(f);break;case"json":p=r.stringify(e.data);break;case"connect":e.qs&&(p=e.qs);break;case"ack":p=e.ackId+(e.args&&e.args.length?"+"+r.stringify(e.args):"")}var d=[t,n+("data"==l?"+":""),c];return null!==p&&void 0!==p&&d.push(p),d.join(":")},n.encodePayload=function(e){var t="";if(1==e.length)return e[0];for(var n=0,i=e.length;i>n;n++){var s=e[n];t+=""+s.length+""+e[n]}return t};var c=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;n.decodePacket=function(e){var t=e.match(c);if(!t)return{};var n=t[2]||"",e=t[5]||"",a={type:i[t[1]],endpoint:t[4]||""};switch(n&&(a.id=n,a.ack=t[3]?"data":!0),a.type){case"error":var t=e.split("+");a.reason=s[t[0]]||"",a.advice=o[t[1]]||"";break;case"message":a.data=e||"";break;case"event":try{var l=r.parse(e);a.name=l.name,a.args=l.args}catch(p){}a.args=a.args||[];break;case"json":try{a.data=r.parse(e)}catch(p){}break;case"connect":a.qs=e||"";break;case"ack":var t=e.match(/^([0-9]+)(\+)?(.*)/);if(t&&(a.ackId=t[1],a.args=[],t[3]))try{a.args=t[3]?r.parse(t[3]):[]}catch(p){}break;case"disconnect":case"heartbeat":}return a},n.decodePayload=function(e){if(""==e.charAt(0)){for(var t=[],i=1,s="";i<e.length;i++)""==e.charAt(i)?(t.push(n.decodePacket(e.substr(i+1).substr(0,s))),i+=Number(s)+1,s=""):s+=e.charAt(i);return t}return[n.decodePacket(e)]}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t){function n(e,t){this.socket=e,this.sessid=t}e.Transport=n,t.util.mixin(n,t.EventEmitter),n.prototype.onData=function(e){if(this.clearCloseTimeout(),(this.connected||this.connecting||this.reconnecting)&&this.setCloseTimeout(),""!==e){var n=t.parser.decodePayload(e);if(n&&n.length)for(var i=0,s=n.length;s>i;i++)this.onPacket(n[i])}return this},n.prototype.onPacket=function(e){return"heartbeat"==e.type?this.onHeartbeat():("connect"==e.type&&""==e.endpoint&&this.onConnect(),this.socket.onPacket(e),this)},n.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var e=this;this.closeTimeout=setTimeout(function(){e.onDisconnect()},this.socket.closeTimeout)}},n.prototype.onDisconnect=function(){return this.close&&this.open&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},n.prototype.onConnect=function(){return this.socket.onConnect(),this},n.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},n.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},n.prototype.packet=function(e){this.send(t.parser.encodePacket(e))},n.prototype.onHeartbeat=function(){this.packet({type:"heartbeat"})},n.prototype.onOpen=function(){this.open=!0,this.clearCloseTimeout(),this.socket.onOpen()},n.prototype.onClose=function(){this.open=!1,this.socket.onClose(),this.onDisconnect()},n.prototype.prepareUrl=function(){var e=this.socket.options;return this.scheme()+"://"+e.host+":"+e.port+"/"+e.resource+"/"+t.protocol+"/"+this.name+"/"+this.sessid},n.prototype.ready=function(e,t){t.call(this)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function i(e){if(this.options={port:80,secure:!1,document:"document"in n?document:!1,resource:"socket.io",transports:t.transports,"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},t.util.merge(this.options,e),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||t.util.ua.hasCORS)){var i=this;t.util.on(n,"beforeunload",function(){i.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function s(){}e.Socket=i,t.util.mixin(i,t.EventEmitter),i.prototype.of=function(e){return this.namespaces[e]||(this.namespaces[e]=new t.SocketNamespace(this,e),""!==e&&this.namespaces[e].packet({type:"connect"})),this.namespaces[e]},i.prototype.publish=function(){this.emit.apply(this,arguments);var e;for(var t in this.namespaces)this.namespaces.hasOwnProperty(t)&&(e=this.of(t),e.$emit.apply(e,arguments))},i.prototype.handshake=function(e){function n(t){t instanceof Error?i.onError(t.message):e.apply(null,t.split(":"))}var i=this,o=this.options,r=["http"+(o.secure?"s":"")+":/",o.host+":"+o.port,o.resource,t.protocol,t.util.query(this.options.query,"t="+ +new Date)].join("/");if(this.isXDomain()&&!t.util.ua.hasCORS){var a=document.getElementsByTagName("script")[0],c=document.createElement("script");c.src=r+"&jsonp="+t.j.length,a.parentNode.insertBefore(c,a),t.j.push(function(e){n(e),c.parentNode.removeChild(c)})}else{var l=t.util.request();l.open("GET",r,!0),l.onreadystatechange=function(){4==l.readyState&&(l.onreadystatechange=s,200==l.status?n(l.responseText):!i.reconnecting&&i.onError(l.responseText))},l.send(null)}},i.prototype.getTransport=function(e){for(var n,i=e||this.transports,s=0;n=i[s];s++)if(t.Transport[n]&&t.Transport[n].check(this)&&(!this.isXDomain()||t.Transport[n].xdomainCheck()))return new t.Transport[n](this,this.sessionid);return null},i.prototype.connect=function(e){if(this.connecting)return this;var n=this;return this.handshake(function(i,s,o,r){function a(e){return n.transport&&n.transport.clearTimeouts(),n.transport=n.getTransport(e),n.transport?void n.transport.ready(n,function(){n.connecting=!0,n.publish("connecting",n.transport.name),n.transport.open(),n.options["connect timeout"]&&(n.connectTimeoutTimer=setTimeout(function(){if(!n.connected&&(n.connecting=!1,n.options["try multiple transports"])){n.remainingTransports||(n.remainingTransports=n.transports.slice(0));for(var e=n.remainingTransports;e.length>0&&e.splice(0,1)[0]!=n.transport.name;);e.length?a(e):n.publish("connect_failed")}},n.options["connect timeout"]))}):n.publish("connect_failed")}n.sessionid=i,n.closeTimeout=1e3*o,n.heartbeatTimeout=1e3*s,n.transports=t.util.intersect(r.split(","),n.options.transports),a(),n.once("connect",function(){clearTimeout(n.connectTimeoutTimer),e&&"function"==typeof e&&e()})}),this},i.prototype.packet=function(e){return this.connected&&!this.doBuffer?this.transport.packet(e):this.buffer.push(e),this},i.prototype.setBuffer=function(e){this.doBuffer=e,!e&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},i.prototype.disconnect=function(){return this.connected&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this},i.prototype.disconnectSync=function(){var e=t.util.request(),n=this.resource+"/"+t.protocol+"/"+this.sessionid;e.open("GET",n,!0),this.onDisconnect("booted")},i.prototype.isXDomain=function(){var e=n.location.port||("https:"==n.location.protocol?443:80);return this.options.host!==n.location.hostname||this.options.port!=e},i.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},i.prototype.onOpen=function(){this.open=!0},i.prototype.onClose=function(){this.open=!1},i.prototype.onPacket=function(e){this.of(e.endpoint).onPacket(e)},i.prototype.onError=function(e){e&&e.advice&&"reconnect"===e.advice&&this.connected&&(this.disconnect(),this.reconnect()),this.publish("error",e&&e.reason?e.reason:e)},i.prototype.onDisconnect=function(e){var t=this.connected;this.connected=!1,this.connecting=!1,this.open=!1,t&&(this.transport.close(),this.transport.clearTimeouts(),this.publish("disconnect",e),"booted"!=e&&this.options.reconnect&&!this.reconnecting&&this.reconnect())},i.prototype.reconnect=function(){function e(){if(n.connected){for(var e in n.namespaces)n.namespaces.hasOwnProperty(e)&&""!==e&&n.namespaces[e].packet({type:"connect"});n.publish("reconnect",n.transport.name,n.reconnectionAttempts)}n.removeListener("connect_failed",t),n.removeListener("connect",t),n.reconnecting=!1,delete n.reconnectionAttempts,delete n.reconnectionDelay,delete n.reconnectionTimer,delete n.redoTransports,n.options["try multiple transports"]=s}function t(){return n.reconnecting?n.connected?e():n.connecting&&n.reconnecting?n.reconnectionTimer=setTimeout(t,1e3):void(n.reconnectionAttempts++>=i?n.redoTransports?(n.publish("reconnect_failed"),e()):(n.on("connect_failed",t),n.options["try multiple transports"]=!0,n.transport=n.getTransport(),n.redoTransports=!0,n.connect()):(n.reconnectionDelay<o&&(n.reconnectionDelay*=2),n.connect(),n.publish("reconnecting",n.reconnectionDelay,n.reconnectionAttempts),n.reconnectionTimer=setTimeout(t,n.reconnectionDelay))):void 0}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var n=this,i=this.options["max reconnection attempts"],s=this.options["try multiple transports"],o=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(t,this.reconnectionDelay),this.on("connect",t)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(e,t){this.socket=e,this.name=t||"",this.flags={},this.json=new i(this,"json"),this.ackPackets=0,this.acks={}}function i(e,t){this.namespace=e,this.name=t}e.SocketNamespace=n,t.util.mixin(n,t.EventEmitter),n.prototype.$emit=t.EventEmitter.prototype.emit,n.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},n.prototype.packet=function(e){return e.endpoint=this.name,this.socket.packet(e),this.flags={},this},n.prototype.send=function(e,t){var n={type:this.flags.json?"json":"message",data:e};return"function"==typeof t&&(n.id=++this.ackPackets,n.ack=!0,this.acks[n.id]=t),this.packet(n)
},n.prototype.emit=function(e){var t=Array.prototype.slice.call(arguments,1),n=t[t.length-1],i={type:"event",name:e};return"function"==typeof n&&(i.id=++this.ackPackets,i.ack="data",this.acks[i.id]=n,t=t.slice(0,t.length-1)),i.args=t,this.packet(i)},n.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},n.prototype.onPacket=function(e){function n(){i.packet({type:"ack",args:t.util.toArray(arguments),ackId:e.id})}var i=this;switch(e.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(e.reason||"booted"):this.$emit("disconnect",e.reason);break;case"message":case"json":var s=["message",e.data];"data"==e.ack?s.push(n):e.ack&&this.packet({type:"ack",ackId:e.id}),this.$emit.apply(this,s);break;case"event":var s=[e.name].concat(e.args);"data"==e.ack&&s.push(n),this.$emit.apply(this,s);break;case"ack":this.acks[e.ackId]&&(this.acks[e.ackId].apply(this,e.args),delete this.acks[e.ackId]);break;case"error":e.advice?this.socket.onError(e):"unauthorized"==e.reason?this.$emit("connect_failed",e.reason):this.$emit("error",e.reason)}},i.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},i.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}("undefined"!=typeof io?io:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function i(){t.Transport.apply(this,arguments)}e.websocket=i,t.util.inherit(i,t.Transport),i.prototype.name="websocket",i.prototype.open=function(){var e,i=t.util.query(this.socket.options.query),s=this;return e||(e=n.MozWebSocket||n.WebSocket),this.websocket=new e(this.prepareUrl()+i),this.websocket.onopen=function(){s.onOpen(),s.socket.setBuffer(!1)},this.websocket.onmessage=function(e){s.onData(e.data)},this.websocket.onclose=function(){s.onClose(),s.socket.setBuffer(!0)},this.websocket.onerror=function(e){s.onError(e)},this},i.prototype.send=function(e){return this.websocket.send(e),this},i.prototype.payload=function(e){for(var t=0,n=e.length;n>t;t++)this.packet(e[t]);return this},i.prototype.close=function(){return this.websocket.close(),this},i.prototype.onError=function(e){this.socket.onError(e)},i.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},i.check=function(){return"WebSocket"in n&&!("__addTask"in WebSocket)||"MozWebSocket"in n},i.xdomainCheck=function(){return!0},t.transports.push("websocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.websocket.apply(this,arguments)}e.flashsocket=n,t.util.inherit(n,t.Transport.websocket),n.prototype.name="flashsocket",n.prototype.open=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.open.apply(e,n)}),this},n.prototype.send=function(){var e=this,n=arguments;return WebSocket.__addTask(function(){t.Transport.websocket.prototype.send.apply(e,n)}),this},n.prototype.close=function(){return WebSocket.__tasks.length=0,t.Transport.websocket.prototype.close.call(this),this},n.prototype.ready=function(e,i){function s(){var t=e.options,s=t["flash policy port"],r=["http"+(t.secure?"s":"")+":/",t.host+":"+t.port,t.resource,"static/flashsocket","WebSocketMain"+(e.isXDomain()?"Insecure":"")+".swf"];n.loaded||("undefined"==typeof WEB_SOCKET_SWF_LOCATION&&(WEB_SOCKET_SWF_LOCATION=r.join("/")),843!==s&&WebSocket.loadFlashPolicyFile("xmlsocket://"+t.host+":"+s),WebSocket.__initialize(),n.loaded=!0),i.call(o)}var o=this;return document.body?s():void t.util.load(s)},n.check=function(){return"undefined"!=typeof WebSocket&&"__initialize"in WebSocket&&swfobject?swfobject.getFlashPlayerVersion().major>=10:!1},n.xdomainCheck=function(){return!0},"undefined"!=typeof window&&(WEB_SOCKET_DISABLE_AUTO_INITIALIZATION=!0),t.transports.push("flashsocket")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),"undefined"!=typeof window)var swfobject=function(){function e(){if(!q){try{var e=D.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(t){return}q=!0;for(var n=W.length,i=0;n>i;i++)W[i]()}}function t(e){q?e():W[W.length]=e}function n(e){if(typeof j.addEventListener!=C)j.addEventListener("load",e,!1);else if(typeof D.addEventListener!=C)D.addEventListener("load",e,!1);else if(typeof j.attachEvent!=C)y(j,"onload",e);else if("function"==typeof j.onload){var t=j.onload;j.onload=function(){t(),e()}}else j.onload=e}function i(){R?s():o()}function s(){var e=D.getElementsByTagName("body")[0],t=g($);t.setAttribute("type",A);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=C){var s=n.GetVariable("$version");s&&(s=s.split(" ")[1].split(","),U.pv=[parseInt(s[0],10),parseInt(s[1],10),parseInt(s[2],10)])}else if(10>i)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,o()}()}else o()}function o(){var e=M.length;if(e>0)for(var t=0;e>t;t++){var n=M[t].id,i=M[t].callbackFn,s={success:!1,id:n};if(U.pv[0]>0){var o=m(n);if(o)if(!v(M[t].swfVersion)||U.wk&&U.wk<312)if(M[t].expressInstall&&a()){var p={};p.data=M[t].expressInstall,p.width=o.getAttribute("width")||"0",p.height=o.getAttribute("height")||"0",o.getAttribute("class")&&(p.styleclass=o.getAttribute("class")),o.getAttribute("align")&&(p.align=o.getAttribute("align"));for(var h={},u=o.getElementsByTagName("param"),f=u.length,d=0;f>d;d++)"movie"!=u[d].getAttribute("name").toLowerCase()&&(h[u[d].getAttribute("name")]=u[d].getAttribute("value"));c(p,h,n,i)}else l(o),i&&i(s);else b(n,!0),i&&(s.success=!0,s.ref=r(n),i(s))}else if(b(n,!0),i){var g=r(n);g&&typeof g.SetVariable!=C&&(s.success=!0,s.ref=g),i(s)}}}function r(e){var t=null,n=m(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=C)t=n;else{var i=n.getElementsByTagName($)[0];i&&(t=i)}return t}function a(){return!V&&v("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function c(e,t,n,i){V=!0,x=i||null,E={success:!1,id:n};var s=m(n);if(s){"OBJECT"==s.nodeName?(S=p(s),w=null):(S=s,w=n),e.id=I,(typeof e.width==C||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==C||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),D.title=D.title.slice(0,47)+" - Flash Player Installation";var o=U.ie&&U.win?"ActiveX":"PlugIn",r="MMredirectURL="+j.location.toString().replace(/&/g,"%26")+"&MMplayerType="+o+"&MMdoctitle="+D.title;if(typeof t.flashvars!=C?t.flashvars+="&"+r:t.flashvars=r,U.ie&&U.win&&4!=s.readyState){var a=g("div");n+="SWFObjectNew",a.setAttribute("id",n),s.parentNode.insertBefore(a,s),s.style.display="none",function(){4==s.readyState?s.parentNode.removeChild(s):setTimeout(arguments.callee,10)}()}h(e,t,n)}}function l(e){if(U.ie&&U.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(p(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(p(e),e)}function p(e){var t=g("div");if(U.win&&U.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName($)[0];if(n){var i=n.childNodes;if(i)for(var s=i.length,o=0;s>o;o++)1==i[o].nodeType&&"PARAM"==i[o].nodeName||8==i[o].nodeType||t.appendChild(i[o].cloneNode(!0))}}return t}function h(e,t,n){var i,s=m(n);if(U.wk&&U.wk<312)return i;if(s)if(typeof e.id==C&&(e.id=n),U.ie&&U.win){var o="";for(var r in e)e[r]!=Object.prototype[r]&&("data"==r.toLowerCase()?t.movie=e[r]:"styleclass"==r.toLowerCase()?o+=' class="'+e[r]+'"':"classid"!=r.toLowerCase()&&(o+=" "+r+'="'+e[r]+'"'));var a="";for(var c in t)t[c]!=Object.prototype[c]&&(a+='<param name="'+c+'" value="'+t[c]+'" />');s.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+a+"</object>",B[B.length]=e.id,i=m(e.id)}else{var l=g($);l.setAttribute("type",A);for(var p in e)e[p]!=Object.prototype[p]&&("styleclass"==p.toLowerCase()?l.setAttribute("class",e[p]):"classid"!=p.toLowerCase()&&l.setAttribute(p,e[p]));for(var h in t)t[h]!=Object.prototype[h]&&"movie"!=h.toLowerCase()&&u(l,h,t[h]);s.parentNode.replaceChild(l,s),i=l}return i}function u(e,t,n){var i=g("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}function f(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(U.ie&&U.win?(t.style.display="none",function(){4==t.readyState?d(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function d(e){var t=m(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=D.getElementById(e)}catch(n){}return t}function g(e){return D.createElement(e)}function y(e,t,n){e.attachEvent(t,n),F[F.length]=[e,t,n]}function v(e){var t=U.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]?!0:!1}function _(e,t,n,i){if(!U.ie||!U.mac){var s=D.getElementsByTagName("head")[0];if(s){var o=n&&"string"==typeof n?n:"screen";if(i&&(T=null,N=null),!T||N!=o){var r=g("style");r.setAttribute("type","text/css"),r.setAttribute("media",o),T=s.appendChild(r),U.ie&&U.win&&typeof D.styleSheets!=C&&D.styleSheets.length>0&&(T=D.styleSheets[D.styleSheets.length-1]),N=o}U.ie&&U.win?T&&typeof T.addRule==$&&T.addRule(e,t):T&&typeof D.createTextNode!=C&&T.appendChild(D.createTextNode(e+" {"+t+"}"))}}}function b(e,t){if(X){var n=t?"visible":"hidden";q&&m(e)?m(e).style.visibility=n:_("#"+e,"visibility:"+n)}}function k(e){var t=/[\\\"<>\.;]/,n=null!=t.exec(e);return n&&typeof encodeURIComponent!=C?encodeURIComponent(e):e}{var S,w,x,E,T,N,C="undefined",$="object",O="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",A="application/x-shockwave-flash",I="SWFObjectExprInst",L="onreadystatechange",j=window,D=document,H=navigator,R=!1,W=[i],M=[],B=[],F=[],q=!1,V=!1,X=!0,U=function(){var e=typeof D.getElementById!=C&&typeof D.getElementsByTagName!=C&&typeof D.createElement!=C,t=H.userAgent.toLowerCase(),n=H.platform.toLowerCase(),i=/win/.test(n?n:t),s=/mac/.test(n?n:t),o=/webkit/.test(t)?parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,r=!1,a=[0,0,0],c=null;if(typeof H.plugins!=C&&typeof H.plugins[O]==$)c=H.plugins[O].description,!c||typeof H.mimeTypes!=C&&H.mimeTypes[A]&&!H.mimeTypes[A].enabledPlugin||(R=!0,r=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),a[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),a[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),a[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof j.ActiveXObject!=C)try{var l=new ActiveXObject(P);l&&(c=l.GetVariable("$version"),c&&(r=!0,c=c.split(" ")[1].split(","),a=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)]))}catch(p){}return{w3:e,pv:a,wk:o,ie:r,win:i,mac:s}}();!function(){U.w3&&((typeof D.readyState!=C&&"complete"==D.readyState||typeof D.readyState==C&&(D.getElementsByTagName("body")[0]||D.body))&&e(),q||(typeof D.addEventListener!=C&&D.addEventListener("DOMContentLoaded",e,!1),U.ie&&U.win&&(D.attachEvent(L,function(){"complete"==D.readyState&&(D.detachEvent(L,arguments.callee),e())}),j==top&&!function(){if(!q){try{D.documentElement.doScroll("left")}catch(t){return void setTimeout(arguments.callee,0)}e()}}()),U.wk&&!function(){return q?void 0:/loaded|complete/.test(D.readyState)?void e():void setTimeout(arguments.callee,0)}(),n(e)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var e=F.length,t=0;e>t;t++)F[t][0].detachEvent(F[t][1],F[t][2]);for(var n=B.length,i=0;n>i;i++)f(B[i]);for(var s in U)U[s]=null;U=null;for(var o in swfobject)swfobject[o]=null;swfobject=null})}()}return{registerObject:function(e,t,n,i){if(U.w3&&e&&t){var s={};s.id=e,s.swfVersion=t,s.expressInstall=n,s.callbackFn=i,M[M.length]=s,b(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){return U.w3?r(e):void 0},embedSWF:function(e,n,i,s,o,r,l,p,u,f){var d={success:!1,id:n};U.w3&&!(U.wk&&U.wk<312)&&e&&n&&i&&s&&o?(b(n,!1),t(function(){i+="",s+="";var t={};if(u&&typeof u===$)for(var m in u)t[m]=u[m];t.data=e,t.width=i,t.height=s;var g={};if(p&&typeof p===$)for(var y in p)g[y]=p[y];if(l&&typeof l===$)for(var _ in l)typeof g.flashvars!=C?g.flashvars+="&"+_+"="+l[_]:g.flashvars=_+"="+l[_];if(v(o)){var k=h(t,g,n);t.id==n&&b(n,!0),d.success=!0,d.ref=k}else{if(r&&a())return t.data=r,void c(t,g,n,f);b(n,!0)}f&&f(d)})):f&&f(d)},switchOffAutoHideShow:function(){X=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:v,createSWF:function(e,t,n){return U.w3?h(e,t,n):void 0},showExpressInstall:function(e,t,n,i){U.w3&&a()&&c(e,t,n,i)},removeSWF:function(e){U.w3&&f(e)},createCSS:function(e,t,n,i){U.w3&&_(e,t,n,i)},addDomLoadEvent:t,addLoadEvent:n,getQueryParamValue:function(e){var t=D.location.search||D.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return k(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return k(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(V){var e=m(I);e&&S&&(e.parentNode.replaceChild(S,e),w&&(b(w,!0),U.ie&&U.win&&(S.style.display="block")),x&&x(E)),V=!1}}}}();!function(){if("undefined"!=typeof window&&!window.WebSocket){var e=window.console;if(e&&e.log&&e.error||(e={log:function(){},error:function(){}}),!swfobject.hasFlashPlayerVersion("10.0.0"))return void e.error("Flash Player >= 10.0.0 is required.");"file:"==location.protocol&&e.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),WebSocket=function(e,t,n,i,s){var o=this;o.__id=WebSocket.__nextId++,WebSocket.__instances[o.__id]=o,o.readyState=WebSocket.CONNECTING,o.bufferedAmount=0,o.__events={},t?"string"==typeof t&&(t=[t]):t=[],setTimeout(function(){WebSocket.__addTask(function(){WebSocket.__flash.create(o.__id,e,t,n||null,i||0,s||null)})},0)},WebSocket.prototype.send=function(e){if(this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";var t=WebSocket.__flash.send(this.__id,encodeURIComponent(e));return 0>t?!0:(this.bufferedAmount+=t,!1)},WebSocket.prototype.close=function(){this.readyState!=WebSocket.CLOSED&&this.readyState!=WebSocket.CLOSING&&(this.readyState=WebSocket.CLOSING,WebSocket.__flash.close(this.__id))},WebSocket.prototype.addEventListener=function(e,t){e in this.__events||(this.__events[e]=[]),this.__events[e].push(t)},WebSocket.prototype.removeEventListener=function(e,t){if(e in this.__events)for(var n=this.__events[e],i=n.length-1;i>=0;--i)if(n[i]===t){n.splice(i,1);break}},WebSocket.prototype.dispatchEvent=function(e){for(var t=this.__events[e.type]||[],n=0;n<t.length;++n)t[n](e);var i=this["on"+e.type];i&&i(e)},WebSocket.prototype.__handleEvent=function(e){"readyState"in e&&(this.readyState=e.readyState),"protocol"in e&&(this.protocol=e.protocol);var t;if("open"==e.type||"error"==e.type)t=this.__createSimpleEvent(e.type);else if("close"==e.type)t=this.__createSimpleEvent("close");else{if("message"!=e.type)throw"unknown event type: "+e.type;var n=decodeURIComponent(e.message);t=this.__createMessageEvent("message",n)}this.dispatchEvent(t)},WebSocket.prototype.__createSimpleEvent=function(e){if(document.createEvent&&window.Event){var t=document.createEvent("Event");return t.initEvent(e,!1,!1),t}return{type:e,bubbles:!1,cancelable:!1}},WebSocket.prototype.__createMessageEvent=function(e,t){if(document.createEvent&&window.MessageEvent&&!window.opera){var n=document.createEvent("MessageEvent");return n.initMessageEvent("message",!1,!1,t,null,null,window,null),n}return{type:e,data:t,bubbles:!1,cancelable:!1}},WebSocket.CONNECTING=0,WebSocket.OPEN=1,WebSocket.CLOSING=2,WebSocket.CLOSED=3,WebSocket.__flash=null,WebSocket.__instances={},WebSocket.__tasks=[],WebSocket.__nextId=0,WebSocket.loadFlashPolicyFile=function(e){WebSocket.__addTask(function(){WebSocket.__flash.loadManualPolicyFile(e)})},WebSocket.__initialize=function(){if(!WebSocket.__flash){if(WebSocket.__swfLocation&&(window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation),!window.WEB_SOCKET_SWF_LOCATION)return void e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf");var t=document.createElement("div");t.id="webSocketContainer",t.style.position="absolute",WebSocket.__isFlashLite()?(t.style.left="0px",t.style.top="0px"):(t.style.left="-100px",t.style.top="-100px");var n=document.createElement("div");n.id="webSocketFlash",t.appendChild(n),document.body.appendChild(t),swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(t){t.success||e.error("[WebSocket] swfobject.embedSWF failed")})}},WebSocket.__onFlashInitialized=function(){setTimeout(function(){WebSocket.__flash=document.getElementById("webSocketFlash"),WebSocket.__flash.setCallerUrl(location.href),WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var e=0;e<WebSocket.__tasks.length;++e)WebSocket.__tasks[e]();WebSocket.__tasks=[]},0)},WebSocket.__onFlashEvent=function(){return setTimeout(function(){try{for(var t=WebSocket.__flash.receiveEvents(),n=0;n<t.length;++n)WebSocket.__instances[t[n].webSocketId].__handleEvent(t[n])}catch(i){e.error(i)}},0),!0},WebSocket.__log=function(t){e.log(decodeURIComponent(t))},WebSocket.__error=function(t){e.error(decodeURIComponent(t))},WebSocket.__addTask=function(e){WebSocket.__flash?e():WebSocket.__tasks.push(e)},WebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var e=window.navigator.mimeTypes["application/x-shockwave-flash"];return e&&e.enabledPlugin&&e.enabledPlugin.filename&&e.enabledPlugin.filename.match(/flashlite/i)?!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",function(){WebSocket.__initialize()},!1):window.attachEvent("onload",function(){WebSocket.__initialize()}))}}(),function(e,t,n){function i(e){e&&(t.Transport.apply(this,arguments),this.sendBuffer=[])}function s(){}e.XHR=i,t.util.inherit(i,t.Transport),i.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},i.prototype.payload=function(e){for(var n=[],i=0,s=e.length;s>i;i++)n.push(t.parser.encodePacket(e[i]));this.send(t.parser.encodePayload(n))},i.prototype.send=function(e){return this.post(e),this},i.prototype.post=function(e){function t(){4==this.readyState&&(this.onreadystatechange=s,o.posting=!1,200==this.status?o.socket.setBuffer(!1):o.onClose())}function i(){this.onload=s,o.socket.setBuffer(!1)}var o=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),n.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=i:this.sendXHR.onreadystatechange=t,this.sendXHR.send(e)},i.prototype.close=function(){return this.onClose(),this},i.prototype.request=function(e){var n=t.util.request(this.socket.isXDomain()),i=t.util.query(this.socket.options.query,"t="+ +new Date);if(n.open(e||"GET",this.prepareUrl()+i,!0),"POST"==e)try{n.setRequestHeader?n.setRequestHeader("Content-type","text/plain;charset=UTF-8"):n.contentType="text/plain"}catch(s){}return n},i.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},i.check=function(e,n){try{if(t.util.request(n))return!0}catch(i){}return!1},i.xdomainCheck=function(){return i.check(null,!0)}}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t){function n(){t.Transport.XHR.apply(this,arguments)}e.htmlfile=n,t.util.inherit(n,t.Transport.XHR),n.prototype.name="htmlfile",n.prototype.get=function(){this.doc=new ActiveXObject("htmlfile"),this.doc.open(),this.doc.write("<html></html>"),this.doc.close(),this.doc.parentWindow.s=this;var e=this.doc.createElement("div");e.className="socketio",this.doc.body.appendChild(e),this.iframe=this.doc.createElement("iframe"),e.appendChild(this.iframe);var n=this,i=t.util.query(this.socket.options.query,"t="+ +new Date);this.iframe.src=this.prepareUrl()+i,t.util.on(window,"unload",function(){n.destroy()})},n.prototype._=function(e,t){this.onData(e);try{var n=t.getElementsByTagName("script")[0];n.parentNode.removeChild(n)}catch(i){}},n.prototype.destroy=function(){if(this.iframe){try{this.iframe.src="about:blank"}catch(e){}this.doc=null,this.iframe.parentNode.removeChild(this.iframe),this.iframe=null,CollectGarbage()}},n.prototype.close=function(){return this.destroy(),t.Transport.XHR.prototype.close.call(this)},n.check=function(){if("ActiveXObject"in window)try{var e=new ActiveXObject("htmlfile");return e&&t.Transport.XHR.check()}catch(n){}return!1},n.xdomainCheck=function(){return!1},t.transports.push("htmlfile")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports),function(e,t,n){function i(){t.Transport.XHR.apply(this,arguments)}function s(){}e["xhr-polling"]=i,t.util.inherit(i,t.Transport.XHR),t.util.merge(i,t.Transport.XHR),i.prototype.name="xhr-polling",i.prototype.open=function(){var e=this;return t.Transport.XHR.prototype.open.call(e),!1},i.prototype.get=function(){function e(){4==this.readyState&&(this.onreadystatechange=s,200==this.status?(i.onData(this.responseText),i.get()):i.onClose())}function t(){this.onload=s,i.onData(this.responseText),i.get()}if(this.open){var i=this;this.xhr=this.request(),n.XDomainRequest&&this.xhr instanceof XDomainRequest?this.xhr.onload=this.xhr.onerror=t:this.xhr.onreadystatechange=e,this.xhr.send(null)}},i.prototype.onClose=function(){if(t.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=s;try{this.xhr.abort()}catch(e){}this.xhr=null}},i.prototype.ready=function(e,n){var i=this;t.util.defer(function(){n.call(i)})},t.transports.push("xhr-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this),function(e,t,n){function i(){t.Transport["xhr-polling"].apply(this,arguments),this.index=t.j.length;var e=this;t.j.push(function(t){e._(t)})}var s=n.document&&"MozAppearance"in n.document.documentElement.style;e["jsonp-polling"]=i,t.util.inherit(i,t.Transport["xhr-polling"]),i.prototype.name="jsonp-polling",i.prototype.post=function(e){function n(){i(),s.socket.setBuffer(!1)}function i(){s.iframe&&s.form.removeChild(s.iframe);try{r=document.createElement('<iframe name="'+s.iframeId+'">')}catch(e){r=document.createElement("iframe"),r.name=s.iframeId}r.id=s.iframeId,s.form.appendChild(r),s.iframe=r}var s=this,o=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);if(!this.form){var r,a=document.createElement("form"),c=document.createElement("textarea"),l=this.iframeId="socketio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=l,a.method="POST",a.setAttribute("accept-charset","utf-8"),c.name="d",a.appendChild(c),document.body.appendChild(a),this.form=a,this.area=c}this.form.action=this.prepareUrl()+o,i(),this.area.value=t.JSON.stringify(e);try{this.form.submit()}catch(p){}this.iframe.attachEvent?r.onreadystatechange=function(){"complete"==s.iframe.readyState&&n()}:this.iframe.onload=n,this.socket.setBuffer(!0)},i.prototype.get=function(){var e=this,n=document.createElement("script"),i=t.util.query(this.socket.options.query,"t="+ +new Date+"&i="+this.index);this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),n.async=!0,n.src=this.prepareUrl()+i,n.onerror=function(){e.onClose()};var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o),this.script=n,s&&setTimeout(function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)},100)},i.prototype._=function(e){return this.onData(e),this.open&&this.get(),this},i.prototype.ready=function(e,n){var i=this;return s?void t.util.load(function(){n.call(i)}):n.call(this)},i.check=function(){return"document"in n},i.xdomainCheck=function(){return!0},t.transports.push("jsonp-polling")}("undefined"!=typeof io?io.Transport:module.exports,"undefined"!=typeof io?io:module.parent.exports,this)}).call(window)},{}],20:[function(e,t){var n,s,o,r,a,c,l;l=e("socket.io-browserify"),s=e("./chat_room_view.coffee"),o=e("./command_center_view.coffee"),r=e("./conversation_model.coffee"),c=e("./user_model.coffee"),a=e("./oauth.coffee"),n=function(){function e(){this.current_users=[],this.open_conversations=[],this.conversations=[],this.server.on("persistent_convo",this.load_persistent_convo),this.server.on("current_users",this.load_current_users),this.server.on("user_logged_on",this.user_logged_on),this.server.on("user_logged_off",this.user_logged_off),function(){var e,t;return e=document.createElement("script"),e.type="text/javascript",e.async=!0,e.src="https://apis.google.com/js/client:plusone.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(e,t)}(),function(){var e,t;return t=document.createElement("script"),t.type="text/javascript",t.async=!0,t.src="/socket.io/socket.io.js",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)}(),this.command_center=new o,this.oauth=new a}return e.prototype.server=l.connect("wss://"+window.location.hostname),e.prototype.load_persistent_convo=function(e,t){var n,i,s,o,a;for(i=e.split(","),o=0,a=i.length;a>o;o++)s=i[o],s!==this.app.me.image_url&&(convo_partners+=s);return n=new r(convo_partners,t),this.conversations.push(n)},e.prototype.load_current_users=function(e){var t,n,s,o,r;for(this.current_users=e,o=this.current_users,r=[],n=0,s=o.length;s>n;n++)t=o[n],r.push(t.image_url===this.me.image_url?this.current_users.splice(i,1):void 0);return r},e.prototype.user_logged_on=function(e,t){var n;return n=new c(e,t),this.current_users.push(n)},e.prototype.user_logged_off=function(e,t){var n,s,o,r,a;for(r=this.current_users,a=[],s=0,o=r.length;o>s;s++)n=r[s],a.push(t===n.image_url?this.current_users.splice(i,1):void 0);return a},e}(),t.exports=new n},{"./chat_room_view.coffee":21,"./command_center_view.coffee":22,"./conversation_model.coffee":23,"./oauth.coffee":26,"./user_model.coffee":34,"socket.io-browserify":19}],21:[function(e,t){var n,s,o,r,a,c;a=e("./app.coffee"),o=e("./message_model.coffee"),r=e("./message_view.coffee"),s=e("./conversation_model.coffee"),c=e("./templates/chat_room.hbs"),n=function(){function e(e){this.convo=e,this.render(),$("body").append(this.$element),a.server.on("message",this.message_callback),a.server.on("user_offline",this.user_offline_callback),a.server.on("typing_notification",this.typing_notification_callback),this.$element.find(".chat-close").on("click",this.closeWindow),this.$element.find(".send").on("keypress",this.sendOnEnter),this.$element.find(".send").on("keyup",this.emitTypingNotification),this.$element.find(".top-bar, minify ").on("click",this.toggleChat),this.$element.on("click",this.removeNotifications),this.$discussion.find(".parley_file_upload").on("change",this.file_upload)}return e.prototype.message_callback=function(e){return this.convo.add_message(e),this.renderDiscussion(),this.$element.find(".top-bar").addClass("new-message"),this.titleAlert()},e.prototype.user_offline_callback=function(){var e;return e=new o(a.me,"http://storage.googleapis.com/parley-assets/server_network.png","This user is no longer online",new Date),this.convo.add_message(e),this.renderDiscussion()},e.prototype.typing_notification_callback=function(e,t,n){var i;if(e===this.convo.message_filter){if(!n)return this.$discussion.find(".incoming").remove(),this.scrollToLastMessage();if(0===this.$discussion.find(".incoming").length)return i="<li class='incoming'><div class='avatar'><img src='"+t.image_url+"'/></div><div class='messages'><p>"+t.display_name+" is typing...</p></div></li>",that.$(".discussion").append(typingNotification),this.$discussion.append(i),this.scrollToLastMessage()}},e.prototype.add_member=function(e){var t,n,o,r,c,l;for(o=this.convo.convo_partners.concat(e),n=new s(o),a.conversations.push(n),l=a.open_conversations,r=0,c=l.length;c>r;r++)t=l[r],t===this.convo.message_filter&&a.open_conversations.splice(i,1);return a.open_conversations.push(n.message_filter),this.convo=n,this.render()},e.prototype.render=function(){return this.$element=$(c(this.convo)),this.$discussion=this.$element.find(".discussion")},e.prototype.renderDiscussion=function(){var e;return e=this.convo.messages.slice(-1)[0],this.appendMessage(e),this.scrollToLastMessage()},e.prototype.appendMessage=function(e){var t;return t=new MesssageView(e),t.render(),this.$discussion.append(t.$element)},e.prototype.scrollToLastMessage=function(){return this.$discussion.scrollTop(this.$discussion.find("li:last-child").offset().top+this.$discussion.scrollTop())},e.prototype.loadPersistentMessages=function(){var e,t,n,i;for(i=this.convo.messages,t=0,n=i.length;n>t;t++)e=i[t],this.appendMessage(e);return this.messages.length>0?this.scrollToLastMessage():void 0},e.prototype.sendOnEnter=function(e){return 13===e.keyCode?(this.sendMessage(),this.removeNotifications()):void 0},e.prototype.sendMessage=function(){var e;return e=new o(this.convo.convo_partners,a.me,this.$element.find(".send").val()),this.messages.add(send),this.renderDiscussion(),a.server.emit("mesage",e),this.$discussion.find(".send").val(""),this.emitTypingNotification()},e.prototype.toggle_convo=function(e){return e.preventDefault(),this.$discussion.toggle(),this.$discussion.attr("display")===!1?this.scrollToLastMessage:void 0},e.prototype.closeWindow=function(e){return e.preventDefault(),e.stopPropagation(),a.server.removeAllListeners(),this.$element.find(".chat-close").off(),this.$element.find(".send").off(),this.$element.find(".send").off(),this.$element.find(".top-bar").off(),this.$element.off(),this.$discussion.off(),this.$element.remove(),delete this},e.prototype.removeNotifications=function(){return this.$element.find(".top-bar").removeClass("new-message"),a.title_notification.notified?this.clearTitleNotification():void 0},e.prototype.emitTypingNotification=function(){return""!==this.$element.find(".send").val()?a.server.emit("user_typing",this.convo.convo_partners_image_urls,a.me,!0):a.server.emit("user_typing",this.convo.convo_partners_image_urls,a.me,!1)},e.prototype.clearTitleNotification=function(){return a.clearAlert(),$("html title").html(a.title_notification.page_title),a.title_notification.notified=!1},e.prototype.titleAlert=function(){var e,t,n,i;return a.title_notification.notified?void 0:(t=this.convo.messages[-1].sender.display_name,e="Pending ** "+t,n=function(){return $("html title").html($("html title").html()===a.title_notification.page_title?e:a.title_notification.page_title)},i=setInterval(n,2200),a.clear_alert=function(){return clearInterval(i)},a.title_notification.notified=!0)},e.prototype.file_upload=function(){var e;return e=this.$discussion.find(".picture_upload").get(0).files[0],a.oauth.file_upload(e,this.convo.convo_partners_image_urls,a.me.image_url)},e}(),t.exports=n},{"./app.coffee":20,"./conversation_model.coffee":23,"./message_model.coffee":24,"./message_view.coffee":25,"./templates/chat_room.hbs":28}],22:[function(e,t){var n,i,s,o,r,a;o=e("./app.coffee"),s=e("./user_view.coffee"),i=e("./persistent_conversation_view.coffee"),a=e("./templates/logged_out.hbs"),r=e("./templates/logged_in.hbs"),n=function(){function e(){this.menu=null,$("body").append(a()),$("ul.login-bar").hide(),$(".parley .persistent-bar.logged-out").on("click",function(){return $("ul.login-bar").toggle()})}return e.prototype.log_in=function(){return $(".parley .persistent-bar.logged_out").off(),this.$element=$(r(o.me)),$(".parley section.controller").html(this.$element),$(".parley div.controller-bar a.messages").on("click",this.toggle_persistent_convos),$(".parley div.controller-bar a.active_users").on("click",this.toggle_current_users),$(".parley div.controller-bar a.user-settings").on("click",this.toggle_user_settings)
},e.prototype.toggle_command_center=function(){return logged_out?$(".parley .persistent-bar.logged-out").on("click",function(){return $("#log-click").toggle(),$("ul.login-bar").slideToggle()}):$(function(){return $(".persistent-bar").on("click",function(){return $(".controller-view").toggle()})})},e.prototype.toggle_current_users=function(){var e,t,n,i,r,a;if(this.menu===!1){for($(".parley div.controller-view").children().remove(),r=o.current_users,a=[],n=0,i=r.length;i>n;n++)e=r[n],t=new s(e),a.push($(".parley div.controller-view").append(t.render()));return a}return $(".parley div.controller-view").children().remove(),$(".parley div.controller-view").html(logged_in_view(o.me))},e.prototype.toggle_persistent_convos=function(){var e,t,n,s,r,a;if(this.menu===!1){for($(".parley div.controller-view").children().remove(),r=o.conversations,a=[],n=0,s=r.length;s>n;n++)e=r[n],t=new i(e),a.push($(".parley div.controller-view").append(t.render()));return a}return $(".parley div.controller-view").children().remove(),$(".parley div.controller-view").html(logged_in_view(o.me))},e.prototype.toggle_user_settings=function(){},e}(),t.exports=n},{"./app.coffee":20,"./persistent_conversation_view.coffee":27,"./templates/logged_in.hbs":30,"./templates/logged_out.hbs":31,"./user_view.coffee":35}],23:[function(e,t){var n,s;s=e("./app.coffee"),n=function(){function e(e,t){var n,s,o,r,a;for(this.convo_partners=e,this.messages=null!=t?t:[],this.generate_message_filter(),this.first_name_list="",this.convo_partners_image_urls=[],a=this.convo_partners,o=0,r=a.length;r>o;o++)s=a[o],n=s.display_name.match(/\A.+\s/)[0],i!==this.convo_partners.length?(this.first_name_list+=""+n+", ",this.convo_partners_image_urls+=s.image_url):(this.first_name_list+=""+n,this.convo_partners_image_urls+=s.image_url)}return e.prototype.add_message=function(e){return this.messages.push(e)},e.prototype.generate_message_filter=function(){var e,t,n,i;for(this.message_filter=[s.me.image_url],i=this.convo_partners,t=0,n=i.length;n>t;t++)e=i[t],this.message_filter.push(e.image_url);return this.message_filter.sort().join()},e}(),t.exports=n},{"./app.coffee":20}],24:[function(e,t){var n,i;i=e("./app.coffee"),n=function(){function e(e,t,n,i){this.recipients=e,this.sender=t,this.content=n,this.time_stamp=i,this.time_stamp||(this.time_stamp=(new Date).toUTCString()),this.convo_id=this.recipients.concat(this.sender).sort().join(),this.time_created=new Date(this.time_stamp)}return e.prototype.time_elapsed=function(){var e,t,n,i,s;return this.current_time=new Date,i=Math.floor((current_time-time_created)/6e4),current_time.getDate()===time_created.getDate()&&1440>i&&(s=!0),t=Math.floor(i/60),n=Math.floor(i%60),60>i?""+i+" mins ago":4>t?0===n?""+t+" hours ago":""+t+" hour "+n+" min ago":(e=this.date_formatter(),s?""+e.hour+":"+e.minutes+" "+e.suffix:""+e.month+" "+e.day+" | "+e.hour+":"+e.minutes+" "+e.suffix)},e.prototype.date_formatter=function(){var e,t,n,i,s,o,r;switch(this.time_created.getMonth()){case 0:o="Jan";break;case 1:o="Feb";break;case 2:o="Mar";break;case 3:o="Apr";break;case 4:o="May";break;case 5:o="Jun";break;case 6:o="Jul";break;case 7:o="Aug";break;case 8:o="Sep";break;case 9:o="Oct";break;case 10:o="Nov";break;case 11:o="Dec"}return t=this.time_created.getHours(),t>12?(r="PM",i=t-12):(r="AM",i=t),n=this.time_created.getMinutes(),s=10>n?"0"+n:""+n,e={month:o,day:this.time_created.getDate(),hour:i,minutes:s,suffix:r}},e}(),t.exports=n},{"./app.coffee":20}],25:[function(e,t){var n,i,s,o;s=e("./app.coffee"),o=e("./templates/message.hbs"),n=e("hbsfy/runtime"),n.registerHelper("calculate_time",function(){return this.time_elapsed()}),i=function(){function e(e){this.message=e}return e.prototype.render=function(){return this.$element=this.message.sender.image_url===s.me.image_url?$('<li class="self"></li>').append(o(this.message)):$('<li class="other"></li>').append(o(this.message))},e}(),t.exports=i},{"./app.coffee":20,"./templates/message.hbs":32,"hbsfy/runtime":18}],26:[function(e,t){var n,i;i=e("./app.coffee"),n=function(){function e(){}return window.sign_in_callback=function(t){return t.status.signed_in?(gapi.client.load("plus","v1",function(){var e;return e=gapi.client.plus.people.get({userId:"me"}),e.execute(function(e){var t,n;return t=e.displayName,n=e.image.url,i.me=new User(t,n),i.server.emit("join",t,n),i.command_center.log_in()})}),e.file_upload=function(e,n,s){return $.ajax({url:"https://www.googleapis.com/upload/storage/v1beta2/b/parley-images/o?uploadType=media&name="+e.name,type:"POST",data:e,contentType:e.type,processData:!1,headers:{Authorization:"Bearer "+t.access_token},success:function(e){return function(t){var o,r,a;return o="https://storage.cloud.google.com/parley-images/"+t.name,a="<img src="+o+" />",i.server.emit("message",a,n,s),r=new Message(n,s,a),e.convo.messages.add_message(r),e.render()}}(this)})}):console.log("Sign-in state: "+t.error)},e}(),t.exports=n},{"./app.coffee":20}],27:[function(e,t){var n,i,s,o,r;o=e("./app.coffee"),n=e("./chat_room_view.coffee"),i=e("handlebars"),r=e("./templates/persistent_convo_reg.hbs"),i=e("hbsfy/runtime"),i.registerHelper("retrieve_image",function(){return this.convo_partners_image_urls[0]}),i.registerHelper("retrieve_last_message",function(){return this.messages[-1].content}),i.registerHelper("calculate_last_message_time",function(){return this.messages[-1].time_elapsed()}),s=function(){function e(e){this.convo=e,this.$element.on("click",this.load_convo)}return e}(),t.exports=s},{"./app.coffee":20,"./chat_room_view.coffee":21,"./templates/persistent_convo_reg.hbs":33,handlebars:16,"hbsfy/runtime":18}],28:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,r,a="",c="function",l=this.escapeExpression;return a+='<div class="parley">\n  <section class="conversation">\n    <div class="top-bar">\n      <a>',(r=n.first_name)?o=r.call(t,{hash:{},data:s}):(r=t&&t.first_name,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+'</a>\n      <ul class="message-alt">\n        <li class="entypo-minus minify"></li>\n        <li class="entypo-resize-full"></li>\n        <li class="entypo-cancel chat-close"></li>\n      </ul>\n    </div>\n    <div class="message-bar">\n      <ul class="additional">\n        <li><a class="entypo-user-add"></a></li>\n        <li><a class="fontawesome-facetime-video"></a></li>\n      </ul>\n      <ul class="existing">\n        <li><a class="entypo-chat"></a></li>\n      </ul>\n    </div>\n    <ol class="discussion"></ol>\n    <textarea class="grw" placeholder="Enter Message..."></textarea>\n    <label class="img_upload entypo-camera">\n      <span>\n        <input class="parley_file_upload" name="img_upload" type="file" /></label>\n      </span>\n  </section>\n</div>'})},{"hbsfy/runtime":18}],29:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,r,a="",c="function",l=this.escapeExpression;return a+='<li class="user">\n  <div class="avatar">\n    <img src= ',(r=n.image_url)?o=r.call(t,{hash:{},data:s}):(r=t&&t.image_url,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+' />\n  </div>\n  <div class="content">\n      <h2>',(r=n.display_name)?o=r.call(t,{hash:{},data:s}):(r=t&&t.display_name,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+"</h2>\n  </div>\n</li>"})},{"hbsfy/runtime":18}],30:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,r,a="",c="function",l=this.escapeExpression;return a+='<div class="controller-view">\n  <div class="default-view">\n    <figure>\n      <img src= ',(r=n.image_url)?o=r.call(t,{hash:{},data:s}):(r=t&&t.image_url,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+"/>\n      <h2>"+l((o=t&&t.me,o=null==o||o===!1?o:o.display_name,typeof o===c?o.apply(t):o))+'</h2>\n    </figure>\n  </div>\n</div>\n<div class="controller-bar">\n  <ul class="utility-bar horizontal-list">\n    <li>\n      <a class="messages" href="#">\n        <span class="entypo-chat"></span>\n      </a>\n    </li>\n    <li>\n      <a class="active-users" href="#">\n        <span class="entypo-users"></span>\n      </a>\n    </li>\n    <li>\n      <a class="user-settings" href="#">\n        <span class="fontawesome-cog"></span>\n      </a>\n    </li>\n  </ul>\n  <div class="persistent-bar">\n    <a>',(r=n.display_name)?o=r.call(t,{hash:{},data:s}):(r=t&&t.display_name,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+'</a>\n    <span class="fontawesome-reorder"></span>\n  </div>\n</div>'})},{"hbsfy/runtime":18}],31:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template(function(e,t,n,i,s){return this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{},'<div class="parley">\n  <section class="controller">\n  <div class="controller-view"></div>\n  <ul class="login-bar g-signin"\n    data-callback="sign_in_callback"\n    data-clientid=\n    data-cookiepolicy="single_host_origin"\n    data-theme="none"\n    data-scope="https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/devstorage.read_write">\n    <li class="btn">\n      <a class="entypo-gplus"></a>\n    </li>\n    <li class="aside">\n      <a>| Sign in with google</a>\n    </li>\n    <div class="persistent-bar parley-logged-out">\n      <a id="log-click"> click here to login!</a>\n      <span class="fontawesome-reorder"></span>\n    </div>\n  </ul>\n  </section>\n</div>'})},{"hbsfy/runtime":18}],32:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,r,a="",c="function",l=this.escapeExpression;return a+='<div class="avatar">\n  <img src= '+l((o=t&&t.sender,o=null==o||o===!1?o:o.image_url,typeof o===c?o.apply(t):o))+'/>\n<div class="message status">\n  <h2>'+l((o=t&&t.sender,o=null==o||o===!1?o:o.display_name,typeof o===c?o.apply(t):o))+"</h2>\n  <p>",(r=n.content)?o=r.call(t,{hash:{},data:s}):(r=t&&t.content,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+'</p>\n  <a class="time">\n    <span class="entypo-clock">',(r=n.calculate_time)?o=r.call(t,{hash:{},data:s}):(r=t&&t.calculate_time,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+"</span>\n  </a>\n</div>"})},{"hbsfy/runtime":18}],33:[function(e,t){var n=e("hbsfy/runtime");t.exports=n.template(function(e,t,n,i,s){this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),s=s||{};var o,r,a="",c="function",l=this.escapeExpression;return a+='<div class="message existing">\n  <div class="avatar">\n    <img src=',(r=n.retrieve_image)?o=r.call(t,{hash:{},data:s}):(r=t&&t.retrieve_image,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+' />\n  </div>\n  <div class="content status entypo-right-open-big">\n    <h2>'+l((o=t&&t.convo_partner,o=null==o||o===!1?o:o.display_name,typeof o===c?o.apply(t):o))+"</h2>\n    <p>",(r=n.retrieve_last_message)?o=r.call(t,{hash:{},data:s}):(r=t&&t.retrieve_last_message,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+'</p>\n    <a class="time">\n      <span class="entypo-clock"> ',(r=n.calculate_last_message_time)?o=r.call(t,{hash:{},data:s}):(r=t&&t.calculate_last_message_time,o=typeof r===c?r.call(t,{hash:{},data:s}):r),a+=l(o)+"</span>\n    </a>\n  </div>\n</div>"})},{"hbsfy/runtime":18}],34:[function(e,t){var n,i;i=e("./app.coffee"),n=function(){function e(e,t){this.display_name=e,this.image_url=t,this.status="active"}return e}(),t.exports=n},{"./app.coffee":20}],35:[function(e,t){var n,i,s,o,r;o=e("./app.coffee"),n=e("./chat_room_view.coffee"),i=e("./conversation_model.coffee"),r=e("./templates/current_user.hbs"),s=function(){function e(e,t){this.current_user=e,this.chat_room=t,this.$element.on("click",this.user_interact_callback)}return e.prototype.render=function(){return this.$element=$(r(this.current_user))},e.prototype.user_interact_callback=function(){return this.$element.parent()[0].hasClass("controller-view")?this.open_conversation():this.chat_room.add_member(this.current_user)},e.prototype.open_conversation=function(){var e,t,s,r,a,c,l,p,h,u,f;for(a=[o.me.image_url,this.current_user.image_url].sort().join(),u=o.open_conversations,c=0,p=u.length;p>c;c++)if(s=u[c],a===s.message_filter)return;for(r=!1,f=o.conversations,l=0,h=f.length;h>l;l++)s=f[l],s.message_filter===a&&(r=!0);return r?(e=new n(s),o.open_conversations.push(a)):(t=new i([this.current_user]),e=new n(t),o.conversations.push(t),o.open_conversations.push(a))},e}(),t.exports=s},{"./app.coffee":20,"./chat_room_view.coffee":21,"./conversation_model.coffee":23,"./templates/current_user.hbs":29}]},{},[20]);